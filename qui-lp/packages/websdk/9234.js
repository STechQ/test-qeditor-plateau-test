"use strict";(this.webpackChunk_stechquick_websdk=this.webpackChunk_stechquick_websdk||[]).push([[9234],{79234(e,t,r){r.d(t,{default:()=>n});var s=function(){var e=this,t=e.$createElement;return(e._self._c||t)("iframe",{ref:"frame",style:e.style,attrs:{allow:e.allow,src:e.iframeSrc,name:this._renderingProps.props().ID+"_qframe"},on:{load:e.onLoad}})};s._withStripped=!0;var i=r(76501);const a=r(25891).default.extend({name:"QFrame",props:{allow:{type:String},url:{type:String},width:{type:String,default:"100%"},height:{type:String,default:"calc(100vh)"},border:{type:Number,default:0},isLoading:{type:Boolean,default:!1},_renderingProps:{type:Object}},data:()=>({messageListener:void 0,iframeSrc:"",currentObjectUrl:null}),watch:{url:{immediate:!0,handler(){this.updateIframeSrc()}}},methods:{Send(e){const t=i._.GetDomain(this.url),r=this.$refs.frame;r.contentWindow?.postMessage(e,t)},createBlobUrl(e){if(!e)return null;let t,r;if(e.startsWith("data:application/pdf;base64,"))t=e.split("data:application/pdf;base64,")?.[1],r=this.base64ToBlob(t,"application/pdf");else if(e.startsWith("data:application/pdf,"))t=e.split("data:application/pdf,")?.[1],r=this.base64ToBlob(t,"application/pdf");else{if(!e.trim().startsWith("<!DOCTYPE html>"))return null;r=new Blob([e.trim()],{type:"text/html"})}return URL.createObjectURL(r)},updateIframeSrc(){this.currentObjectUrl&&(URL.revokeObjectURL(this.currentObjectUrl),this.currentObjectUrl=null);const e=this.createBlobUrl(this.url);e?(this.currentObjectUrl=e,this.iframeSrc=e):this.iframeSrc=this.url},base64ToBlob(e,t="application/octet-stream"){const r=atob(e),s=r.length,i=new Uint8Array(s);for(let e=0;e<s;e++)i[e]=r.charCodeAt(e);return new Blob([i],{type:t})},post(e,t,r){const s=this.$refs.frame,i=document.createElement("form");i.style.display="none";let a=e;const n=this.createBlobUrl(e);n&&(a=n,setTimeout(()=>{URL.revokeObjectURL(n)},3e3)),i.action=a,i.method="post",i.target=s.name,r&&(i.enctype=r),Object.keys(t).forEach(function(e){const r=document.createElement("input");r.name=e,r.value=t[e],r.type="hidden",i.appendChild(r)});const o=document.body;o.appendChild(i),i.submit(),o.removeChild(i)},onLoad(){this.$emit("onLoad")}},mounted(){this.messageListener=e=>{const t=this.$refs.frame;t&&t.contentWindow==e.source&&this.$emit("onMessage",e.data)},window.addEventListener("message",this.messageListener)},destroyed(){this.messageListener&&window.removeEventListener("message",this.messageListener),this.currentObjectUrl&&URL.revokeObjectURL(this.currentObjectUrl)},computed:{style(){return`border:${this.border};overflow:hidden;height:${this.height};width:${this.width};opacity:${this.isLoading?.1:1}`}}}),n=(0,r(7258).A)(a,s,[],!1,null,null,null).exports}}]);