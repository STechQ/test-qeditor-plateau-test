!function(e,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof exports?exports.plateauIAMPopup=o():e.plateauIAMPopup=o()}(this,()=>(()=>{"use strict";return async function(){var e;e={type:"iamReady"},opener.postMessage(e,"*"),window.addEventListener("message",async e=>{const o=e.data;if("iamOptions"===o.type){if(!o.options)throw new Error("no options received");o.tokens&&function(e,o){e&&e.idToken&&e.refreshToken&&e.token&&(sessionStorage.setItem(o+"kcIdToken",e.idToken),sessionStorage.setItem(o+"kcRefreshToken",e.refreshToken),sessionStorage.setItem(o+"kcToken",e.token))}(o.tokens,o.sessionStorageNamePrefix??""),window.baseWindow=o.parentWindow,await websdk.init({...o.options,iamInPopup:!0})}})}(),{}})());