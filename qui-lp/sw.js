!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.qui=t():e.qui=t()}(self,()=>(()=>{"use strict";var __webpack_modules__={681(__unused_webpack_module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.CryptoHelper=void 0;var CryptoHelper=function(){function CryptoHelper(){}return CryptoHelper.generateRandom=function(nums){var characters="0123456789abcdefghijklmnopqrstuvwxyz",sum=nums.reduce(function(e,t){return e+t},0),isomorphicCrypto="undefined"!=typeof crypto?eval("crypto"):eval("require")("crypto"),randomValues=isomorphicCrypto.getRandomValues(new Uint8Array(sum)),index=0;return nums.reduce(function(e,t){return e.push(Array.from(new Array(t)).map(function(e){return characters[randomValues[index++]%characters.length]}).join("")),e},[])},CryptoHelper.CreateGuid=function(){var e=Date.now().toString(36).substring(0,9).padStart(9,"0");return CryptoHelper.generateRandom([8,4,4,4,3]).join("-")+e},CryptoHelper}();exports.CryptoHelper=CryptoHelper}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}var __webpack_exports__={};return(()=>{var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0});const t=__webpack_require__(681),r={png:"image/png",gif:"image/gif",jpeg:"image/jpeg",jpg:"image/jpeg",svg:"image/svg+xml",json:"application/json",lottie:"application/json",qjson:"application/json",woff2:"font/woff2",woff:"font/woff",ttf:"font/ttf",otf:"font/otf"},o=new Set(["gif","png","jpeg","jpg","svg","woff","woff2","ttf","otf"]);function n(e,t){const o=(e||"").toLowerCase();return r[o]||t||"application/octet-stream"}const s=["/quick/","/test-qeditor-plateau-test/","/test-qeditor-workflow-main-merged/","/qui-lp/"];function a(e){const{uri:t}=function(e){for(const t of s)if(e.startsWith(t))return{uri:e.slice(t.length),prefix:t};return{uri:e,prefix:null}}(e);return t.replace(/^\/+/,"")}function c(e,t){if("string"==typeof e)return e;const r=new ArrayBuffer(e.byteLength);return new Uint8Array(r).set(e),t?new Blob([r],{type:t}):r}let i=!1;new Promise(e=>e()).then(()=>i=!0),"undefined"!=typeof doNothing&&doNothing();const u=!0===i;function p(e,t={}){let r,o,n;const s=e=>{n&&clearTimeout(n),n=setTimeout(()=>{o(new Error(`The operation has timed out. timeoutValue  : ${e}`))},e)};return e&&s(e),{startTimer:s,promise:new Promise((e,n)=>{var s;s=e,r=u&&t.fixSyncResolve?e=>setTimeout(()=>s(e)):s,o=n}),resolver:r,reject:o}}const l=self,f=new Map,d=new Map;l.addEventListener("install",()=>l.skipWaiting()),l.addEventListener("activate",()=>{}),l.addEventListener("message",e=>{const t=e.data;if("constant"===t.resourceType){const e=d.get(t.resourceId);if(!e)return void console.warn("[SW] No constwaiter for resourceId:",t.resourceId);let r;try{r=JSON.parse(t.resourceModel)}catch{r=t.resourceModel}const o=[];for(const e of r){let t=e.resourceModel;try{t=JSON.parse(e.resourceModel)}catch{}t&&"object"==typeof t&&o.push({raw:`<<constant:${t.id}>>`,type:"constant",id:t.id,content:t})}return void e.resolver(JSON.stringify(o))}const r=f.get(t.resourceId);var n;if(r)if(n=t.resourceType,o.has((n||"").toLowerCase())){const e=function(e){const t=atob(e),r=t.length,o=new Uint8Array(r);for(let e=0;e<r;e++)o[e]=t.charCodeAt(e);return o}(y(t.resourceModel));r.resolver({resource:e,resourceId:t.resourceId,resourceType:t.resourceType})}else r.resolver({resource:t.resourceModel,resourceId:t.resourceId,resourceType:t.resourceType});else console.warn("[SW] No waiter for resourceId:",t.resourceId)});const y=e=>{const t=e.indexOf(",");return t>=0?e.slice(t+1):e};async function w(e,t,r=15e3){let o=f.get(t);return o||(o=p(r),f.set(t,o),o.promise.finally(()=>{f.delete(t)}),await _(e,t)),o.promise}l.addEventListener("fetch",e=>{const r=(async e=>{const r=new URL(e.request.url),o=decodeURI(r.pathname);if(o.includes("/getMultipleModels")){const{value:r}=await async function(e){return(e.headers.get("content-type")||"").includes("application/json")?{type:"json",value:await e.json()}:{type:"arraybuffer",value:await e.arrayBuffer()}}(e.request.clone()),o=r,n=t.CryptoHelper.CreateGuid(),s=p(15e3);d.set(n,s),await g({messageID:n,modelIDs:o});const a=await s.promise;return d.delete(n),new Response(JSON.stringify(a),{status:200,headers:{"Content-Type":"application/json"}})}if(a(o).startsWith("<<")){const t=(e=>{const t=a(e);if(!t.startsWith("<<")||!t.endsWith(">>"))return console.warn("[SW] Invalid resource URI format:",t),null;const r=t.slice(2,-2),o=r.indexOf(":");if(o<=0||o===r.length-1)return console.warn("[SW] Invalid resource URI payload:",r),null;const n=r.slice(0,o),s=r.slice(o+1);return n&&s?{type:n,guid:s}:(console.warn("[SW] Missing type or guid:",{type:n,guid:s}),null)})(o);if(!t)return fetch(e.request);switch(t.type){case"img":{const r=await w(e.clientId,t.guid),o=n(r.resourceType,"image/*");return new Response(c(r.resource),{status:200,headers:{"Content-Type":o}})}case"lottie":{const r=await w(e.clientId,t.guid),o=n(r.resourceType);return new Response(c(r.resource),{status:200,headers:{"Content-Type":o}})}case"woff2":case"woff":case"ttf":case"otf":{const r=await w(e.clientId,t.guid),o=n(r.resourceType);return new Response(c(r.resource),{status:200,headers:{"Content-Type":o}})}case"qjson":{const r=await w(e.clientId,t.guid),o=n(r.resourceType);return new Response(c(r.resource),{status:200,headers:{"Content-Type":o}})}}}try{return await fetch(e.request)}catch(e){return console.warn("[SW] fetch fallback error:",e),new Response("Service unavailable",{status:503})}})(e);e.respondWith(r)});const _=async(e,t)=>{(await l.clients.matchAll({type:"window"}))[0].postMessage(t)},g=async e=>{(await l.clients.matchAll({type:"window"}))[0].postMessage(JSON.stringify(e))}})(),__webpack_exports__})());