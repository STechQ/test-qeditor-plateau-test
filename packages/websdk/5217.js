"use strict";(this.webpackChunk_stechquick_websdk=this.webpackChunk_stechquick_websdk||[]).push([[5217],{5217(e,t,n){n.d(t,{default:()=>r});var o=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{ref:"layoutContainer",style:"width:"+e.width+"; height:"+e.height+";",attrs:{id:"layoutContainer"}})};o._withStripped=!0;var i=n(25891),s=n(8035),d=n.n(s),a=n(24227);function l(e){const t=this;var n=document.createElement("li");n.className="lm_popout",e.header.controlsContainer.prepend(n),function(e,n){var o=void 0,i=window;e.onclick=function(){if(t._renderingProps.isEditMode)return;const e=o.config.componentState.class,n="wind"+(1e4*Math.random()).toFixed(0),s=window.open("",n,"height=700,width=1000");t.childWindows.push({windId:n,childWindow:s}),s&&(s.onload=()=>{if(s){if(s.ranOnce)return;s.ranOnce=!0;const d=document.getElementsByClassName(e)[0].children[0],l=document.createElement("DIV");s.document.write(`<!DOCTYPE html><html><head><title>${o.config.title}</title></head><body></body></html>`),s.document.body.append(l),l.className="lm_content "+i.document.getElementsByClassName("v-application")[0].getAttribute("class"),l.style.width="100%",l.style.height="100%",l.style.overflow="scroll",l.style.display="grid",l.append(d);const c=document.head.children;for(let e=0;e<c.length;e++){let t=c[e];if("LINK"==t.tagName){let e=t;const n=s.document.createElement("link");n.rel="stylesheet",n.type="text/css",n.href=e.href,s.document.head.appendChild(n)}else if("STYLE"==t.tagName){const e=s.document.createElement("style");e.type="text/css",e.innerHTML=t.innerHTML,s.document.head.appendChild(e)}}s.stateCopy={componentState:{class:o.config.componentState.class,text:o.config.componentState.text,fromWindow:!0},title:o.config.title,type:"component",componentName:o.config.componentName},s.onbeforeunload=function(){t.addItem({config:s.stateCopy}),i.document.getElementsByClassName(s.stateCopy.componentState.class)[0].appendChild(s.document.getElementsByClassName("innerWindow")[0]),t.childWindows.splice(t.childWindows.findIndex(e=>e.windId==n),1)},function(e){const t=a.z.Instance.document;var n;n=t.body.appendChild,t.body.appendChild=o=>{if(t.hasFocus())return n.apply(window.document.body,[o]),o;for(let t=0;t<e.length;t++)if(e[t].childWindow.document.hasFocus()){e[t].childWindow.document.body.appendChild(o);break}return o}}(t.childWindows),o.remove()}},s.document&&"complete"==s.document.readyState&&s.onload())},n.on("activeContentItemChanged",function(e){o=e,t.$emit("activeContentItemChanged",e)})}(n,e)}const c=i.default.extend({name:"GoldenLayout",data:()=>({config:{settings:{showPopoutIcon:!1,selectionEnabled:!0},dimensions:{},content:[{type:"stack",id:"default",content:[{type:"component",componentName:"component",title:"default",componentState:{id:"default",text:"default",class:"default"+(1e5*Math.random()).toFixed(0)}}]}]},getGoldenLayout:null,getContentItems:null,getComponentInCreation:null,componentCb:null,StateChangedForDesign:!1,closedPanes:[],containerWidth:0,containerHeight:0,childWindows:[]}),props:{_renderingProps:{default:{context:void 0,isEditMode:void 0}},width:{type:String,default:"1200px"},height:{type:String,default:"700px"},glConfig:{type:Object,default:null},childNames:{type:Array,default:["default"]},dimensions:{type:Object}},methods:{getClosedPanes(){return this.closedPanes},getConfig(){return this.getGoldenLayout().toConfig()},setConfig(e){this.getGoldenLayout().config=e,this.getGoldenLayout().root.contentItems.forEach(e=>{e.remove()}),e.content?.forEach(e=>{this.getGoldenLayout().root.addChild(e)}),this.StateChangedForDesign=!0},findContentItem(e){return this.getContentItems().find(t=>t.config.componentState.id==e)},changeTitle(e,t){this.findContentItem(e).setTitle(t)},removePane(e){const t=this;let n=t.findContentItem(e),o=[];o.push(e),t.removeItem(o),n.remove(),t.$emit("paneClosed",e)},addItem({childName:e,config:t}){var n={type:"component",componentName:"component",title:e,componentState:{id:e,text:e,class:e+(1e5*Math.random()).toFixed(0)}};t&&(n=t);var o=this.getGoldenLayout();o.root.contentItems[0].addChild(n),this.childNames.push(e);var i=o.toConfig();return this.$emit("paneCreated",e),i},goldenLayoutInit(e){this.StateChangedForDesign=e},removeItem(e){const t=this;let n=this._renderingProps.context().GetItemSingle("Dory"),o=this._renderingProps.context().GetItemSingle("HistoryManager").currentLevel().last().qjson.pJson.find(e=>"GoldenLayout"==e.T);e.forEach(e=>{t._renderingProps.isEditMode&&t.childNames.splice(t.childNames.indexOf(e),1),o.C[e]&&!t._renderingProps.isEditMode&&t.closedPanes.push(e),t.componentCb().children?.[e]?.map(e=>e.compId).forEach(e=>n.DestroyComponentCollectionByID(e)),t.$emit("paneClosed",e)}),t.$emit("GL_stateChanged",t.getGoldenLayout().toConfig(),t.childNames)},customChildAppender({childName:e,createdComps:t}){const n=this.closedPanes.findIndex(t=>t==e);n>-1&&this.closedPanes.splice(n,1),this.addItem({childName:e})},appendDomElements(e,t){if(t.fromWindow)e.getElement()[0].innerHTML='<div class="'+t.class+'"></div>',t.fromWindow=!1;else{if(!this.componentCb){const e=this.getComponentInCreation();this.componentCb=()=>e}var n=this.componentCb().children?.[t.id]?.map(e=>e.domElement);if(!n)return;e.getElement()[0].innerHTML='<div class="'+t.class+'"><div class="innerWindow"></div>',n.forEach(t=>{t&&e.getElement()[0].getElementsByClassName("innerWindow")[0].append(t)})}},onStackClose(e){const t=this;e.header.controlsContainer.find(".lm_close").off("click").click(function(){let n=[];for(let t=0;t<e.config.content.length;t++){const o=e.config.content[t].componentState.id;n.push(o)}t.removeItem(n),t.StateChangedForDesign=!t._renderingProps.isEditMode,e.remove()})},resizeObserver(){const e=this;new ResizeObserver(t=>{t.forEach(t=>{e.containerWidth==t.target.clientWidth&&e.containerHeight==t.target.clientHeight||(e.containerWidth=t.target.clientWidth,e.containerHeight=t.target.clientHeight,e.getGoldenLayout().updateSize())})}).observe(this.$refs.layoutContainer)},closeChildWindows(){this.childWindows&&this.childWindows.forEach(e=>{e.childWindow.closed||e.childWindow.close()})}},mounted(){const e=this;e.closedPanes=[];var t=this.$refs.layoutContainer;if(window.parentContainer=t,!t)return;this.glConfig&&(this.config=this.glConfig),this.config.dimensions=this.dimensions||this.config.dimensions;const n=this._renderingProps.context().GetItemSingle("RenderingContext");this.getComponentInCreation=()=>n.componentInCreation;var o=new(d())(this.config,t);this.resizeObserver(),o.registerComponent("component",function(t,n){if(n.fromWindow)t.getElement()[0].innerHTML='<div class="'+n.class+'"></div>',n.fromWindow=!1;else{if(!e.componentCb){const t=e.getComponentInCreation();e.componentCb=()=>t}var o=e.componentCb().children?.[n.id]?.map(e=>e.domElement);if(!o)return;t.getElement()[0].innerHTML='<div class="'+n.class+'"><div class="innerWindow"></div>',o.forEach(e=>{e&&(t.getElement()[0].getElementsByClassName("innerWindow")[0].append(e),t.getElement()[0].style.overflow="overlay")})}}),o.on("stateChanged",()=>{e.StateChangedForDesign?e.StateChangedForDesign=!1:e.$emit("GL_stateChanged",e.getGoldenLayout().toConfig(),e.childNames)}),o.on("stackCreated",function(t){l.call(e,t),e.onStackClose(t)}),o.on("tabCreated",function(t){e.$emit("paneCreated",t.contentItem.config.componentState.text),t.closeElement.off("click").click(function(){const n=t.contentItem.config.componentState.text;e.removeItem([n]),e.StateChangedForDesign=!e._renderingProps.isEditMode,t.contentItem.remove()})}),this.getContentItems=()=>{let t=[];return e.getGoldenLayout()._getAllContentItems?.().forEach(e=>{"component"==e.config.type&&t.push(e)}),t},o.init(),this.getGoldenLayout=()=>o;let i=document.getElementsByTagName("head"),s=!1;for(let e of i[0].children)e.href&&e.href.includes("goldenlayout-base")&&(s=!0);if(!s){let e=document.createElement("link");e.href="https://golden-layout.com/files/latest/css/goldenlayout-base.css",e.rel="stylesheet",e.type="text/css";let t=document.createElement("link");t.href="https://golden-layout.com/files/latest/css/goldenlayout-light-theme.css",t.rel="stylesheet",t.type="text/css",i[0].appendChild(e),i[0].appendChild(t)}},destroyed(){this.$el?.remove()}}),r=(0,n(7258).A)(c,o,[],!1,null,null,null).exports}}]);