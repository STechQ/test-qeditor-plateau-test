"use strict";(this.webpackChunk_stechquick_websdk=this.webpackChunk_stechquick_websdk||[]).push([[6442],{17922:(e,t,i)=>{i.d(t,{c:()=>l});var n=i(86043),s=i(73917),r=i(18330),o=i(56109),a=i(6206);class l extends s.S{constructor(e,t,i,n){super(),this._render=e,this._fields=t,this._fieldsMap=n||{},this._watchMethod=i}_renderCore(e){var t,i,s,l,d,h,c,u=(0,n.Z)(e.container),m=(t=e.model,i=this._watchMethod,s=this._fields,l=this._fieldsMap,d=t=>{u.empty(),this._render(u,t,e.model)},c=((e,t,i)=>t((()=>e),i))(t,i,(function(e){h&&h(),(0,a.pt)(e)?d(e):h=function(e,t,i,n,s){var r={},o=i.slice(),a=i.map((function(i){var a=n[i];return t(a?()=>a(e):()=>e[i],(function(e){if(r[i]=e,o.length){var t=o.indexOf(i);t>=0&&o.splice(t,1)}o.length||s(r)}))}));return function(){a.forEach((e=>e()))}}(e,i,s,l,d)})),function(){h&&h(),c&&c()});return r.Z.on(u,o.x,m),u.contents()}}},96708:(e,t,i)=>{i.d(t,{E:()=>o,h:()=>a});var n=i(6206),s=function(e,t){var i=t(e);if((0,n.Kn)(i))try{return JSON.stringify(i)}catch(e){return i}return i},r=function(e,t,i,n){return t[i[s(e,n)]]},o=function(e,t){if(e.length!==t.length)return!1;for(var i=0;i<t.length;i++)if(e[i]!==t[i])return!1;return!0},a=function(e,t,i,n){var o={},a={},l=0,d=0,h=[];e.forEach((function(e,t){var n=s(e,i);o[n]=t})),t.forEach((function(e,t){var n=s(e,i);a[n]=t}));for(var c=Math.max(e.length,t.length),u=0;u<c+l;u++){var m=t[u],_=u-l+d,I=e[_];if(!m||I&&!r(I,t,a,i))I&&(h.push({type:"remove",key:i(I),index:u,oldItem:I}),d++,u--);else{var p=s(m,i),f=o[p],g=e[f];if(g){if(f!==_)return;n(g,m)||h.push({type:"update",data:m,key:i(m),index:u,oldItem:g})}else l++,h.push({type:"insert",data:m,index:u})}}return h}},49118:(e,t,i)=>{i.d(t,{M:()=>r});var n=i(6232),s=i(6206),r=function(e,t){var i;function r(r,o,a,l,d){var h,c,u=o(d);if(!a&&(h=(0,n.k3)(u),!(0,s.Kn)(h))){var m=function(t,s){if(!i){i={};for(var r=function(e,t,i){return Array.isArray(i)?e.map((e=>t(e))):e}(e,t,s),o=0;o<r.length;o++)i[(0,n.k3)(r[o])]=!0}return i}(o,l);return m[h]?!t:!!t}for(c=0;c<e.length;c++)if(r(e[c],u))return!t;return!!t}function o(e,i){if(void 0!==i)return[e,t?"<>":"=",i]}this.getLocalFilter=function(e,t,i,s){return t=void 0===t?n.bY:t,r.bind(this,t,e,i,s)},this.getExpr=function(i){var n;if(i)return e.forEach((function(e,r){var a;n=n||[],r>0&&n.push(t?"and":"or"),a=(0,s.HD)(i)?o(i,e):function(e,i){for(var n=[],s=0,r=e.length;s<r;s++){var a=e[s],l=o(a,i&&i[a]);if(!l)break;s>0&&n.push(t?"or":"and"),n.push(l)}return n}(i,e),n.push(a)})),n&&1===n.length&&(n=n[0]),n},this.getCombinedFilter=function(e,i){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=this.getExpr(e),r=s;return(n||t)&&i&&(s?((r=[]).push(s),r.push(i)):r=i),r}}},13694:(e,t,i)=>{i.d(t,{Z:()=>p});var n=i(83352),s=i(6343),r=i(73416),o=i(6232),a=i(43515),l={load:()=>(0,a.BH)().reject(),loadSingle:()=>(0,a.BH)().reject(),loadFromStore:()=>(0,a.BH)().reject(),loadNextPage:()=>(0,a.BH)().reject(),loadOptions:o.ZT,userData:o.ZT,cancel:o.ZT,cancelAll:o.ZT,filter:o.ZT,addSearchFilter:o.ZT,group:o.ZT,paginate:o.ZT,pageSize:o.ZT,pageIndex:o.ZT,resetDataSourcePageIndex:o.ZT,totalCount:o.ZT,isLastPage:o.ZT,isLoading:o.ZT,isLoaded:o.ZT,searchValue:o.ZT,searchOperation:o.ZT,searchExpr:o.ZT,select:o.ZT,key:o.ZT,keyOf:o.ZT,store:o.ZT,items:o.ZT,applyMapFunction:o.ZT,getDataSource:o.ZT,reload:o.ZT,on:o.ZT,off:o.ZT};var d="_dataSourceOptions",h="_dataSourceChangedHandler",c="_dataSourceLoadErrorHandler",u="_dataSourceLoadingChangedHandler",m="_dataSourceFromUrlLoadMode",_="_getSpecificDataSourceOption",I="_normalizeDataSource";const p={postCtor:function(){this.on("disposing",function(){this._disposeDataSource()}.bind(this))},_refreshDataSource:function(){this._initDataSource(),this._loadDataSource()},_initDataSource:function(){var e,t,i=_ in this?this[_]():this.option("dataSource");this._disposeDataSource(),i&&(i instanceof n.o?(this._isSharedDataSource=!0,this._dataSource=i):(e=d in this?this[d]():{},t=this._dataSourceType?this._dataSourceType():n.o,i=(0,r.aN)(i,{fromUrlLoadMode:m in this&&this[m]()}),this._dataSource=new t((0,s.l)(!0,{},e,i))),I in this&&(this._dataSource=this[I](this._dataSource)),this._addDataSourceHandlers(),this._initDataController())},_initDataController:function(){var e,t=null===(e=this.option)||void 0===e?void 0:e.call(this,"_dataController"),i=this._dataSource;this._dataController=t||new class{constructor(e){if(!e)return l;this._dataSource=e}load(){return this._dataSource.load()}loadSingle(e,t){return arguments.length<2&&(t=e,e=this.key()),this._dataSource.loadSingle(e,t)}loadFromStore(e){return this.store().load(e)}loadNextPage(){return this.pageIndex(1+this.pageIndex()),this.load()}loadOptions(){return this._dataSource.loadOptions()}userData(){return this._dataSource._userData}cancel(e){this._dataSource.cancel(e)}cancelAll(){this._dataSource.cancelAll()}filter(e){return this._dataSource.filter(e)}addSearchFilter(e){this._dataSource._addSearchFilter(e)}group(e){return this._dataSource.group(e)}paginate(){return this._dataSource.paginate()}pageSize(){return this._dataSource._pageSize}pageIndex(e){return this._dataSource.pageIndex(e)}resetDataSourcePageIndex(){this.pageIndex()&&(this.pageIndex(0),this.load())}totalCount(){return this._dataSource.totalCount()}isLastPage(){return this._dataSource.isLastPage()||!this._dataSource._pageSize}isLoading(){return this._dataSource.isLoading()}isLoaded(){return this._dataSource.isLoaded()}searchValue(e){return arguments.length?this._dataSource.searchValue(e):this._dataSource.searchValue()}searchOperation(e){return this._dataSource.searchOperation(e)}searchExpr(e){return arguments.length?this._dataSource.searchExpr(e):this._dataSource.searchExpr()}select(){return this._dataSource.select(...arguments)}key(){return this._dataSource.key()}keyOf(e){return this.store().keyOf(e)}store(){return this._dataSource.store()}items(){return this._dataSource.items()}applyMapFunction(e){return this._dataSource._applyMapFunction(e)}getDataSource(){return this._dataSource||null}reload(){return this._dataSource.reload()}on(e,t){this._dataSource.on(e,t)}off(e,t){this._dataSource.off(e,t)}}(i)},_addDataSourceHandlers:function(){h in this&&this._addDataSourceChangeHandler(),c in this&&this._addDataSourceLoadErrorHandler(),u in this&&this._addDataSourceLoadingChangedHandler(),this._addReadyWatcher()},_addReadyWatcher:function(){this._dataSource.on("loadingChanged",function(e){this._ready&&this._ready(!e)}.bind(this))},_addDataSourceChangeHandler:function(){var e=this._dataSource;this._proxiedDataSourceChangedHandler=function(t){this[h](e.items(),t)}.bind(this),e.on("changed",this._proxiedDataSourceChangedHandler)},_addDataSourceLoadErrorHandler:function(){this._proxiedDataSourceLoadErrorHandler=this[c].bind(this),this._dataSource.on("loadError",this._proxiedDataSourceLoadErrorHandler)},_addDataSourceLoadingChangedHandler:function(){this._proxiedDataSourceLoadingChangedHandler=this[u].bind(this),this._dataSource.on("loadingChanged",this._proxiedDataSourceLoadingChangedHandler)},_loadDataSource:function(){var e=this._dataSource;e&&(e.isLoaded()?this._proxiedDataSourceChangedHandler&&this._proxiedDataSourceChangedHandler():e.load())},_loadSingle:function(e,t){return e="this"===e?this._dataSource.key()||"this":e,this._dataSource.loadSingle(e,t)},_isLastPage:function(){return!this._dataSource||this._dataSource.isLastPage()||!this._dataSource._pageSize},_isDataSourceLoading:function(){return this._dataSource&&this._dataSource.isLoading()},_disposeDataSource:function(){this._dataSource&&(this._isSharedDataSource?(delete this._isSharedDataSource,this._proxiedDataSourceChangedHandler&&this._dataSource.off("changed",this._proxiedDataSourceChangedHandler),this._proxiedDataSourceLoadErrorHandler&&this._dataSource.off("loadError",this._proxiedDataSourceLoadErrorHandler),this._proxiedDataSourceLoadingChangedHandler&&this._dataSource.off("loadingChanged",this._proxiedDataSourceLoadingChangedHandler)):this._dataSource.dispose(),delete this._dataSource,delete this._proxiedDataSourceChangedHandler,delete this._proxiedDataSourceLoadErrorHandler,delete this._proxiedDataSourceLoadingChangedHandler)},getDataSource:function(){return this._dataSource||null}}},75966:(e,t,i)=>{i.d(t,{u:()=>p});var n=i(86043),s=i(18330),r=i(90414),o=i(76111),a=i(57131),l=i(14309),d=i(66289),h=i(31761),c="dxContexMenu",u=(0,d.V4)("contextmenu",c),m=(0,d.V4)(h.Z.name,c),_="dxcontextmenu",I=a.Z.inherit({setup:function(e){var t=(0,n.Z)(e);s.Z.on(t,u,this._contextMenuHandler.bind(this)),(r.touch||o.Z.isSimulator())&&s.Z.on(t,m,this._holdHandler.bind(this))},_holdHandler:function(e){(0,d.N5)(e)&&!o.Z.isSimulator()||this._fireContextMenu(e)},_contextMenuHandler:function(e){this._fireContextMenu(e)},_fireContextMenu:function(e){return(0,d.BX)({type:_,originalEvent:e})},teardown:function(e){s.Z.off(e,"."+c)}});(0,l.Z)(_,new I);var p=_},31761:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(66289),s=i(46121),r=i(65011),o=Math.abs,a="dxhold",l=s.Z.inherit({start:function(e){this._startEventData=(0,n.a0)(e),this._startTimer(e)},_startTimer:function(e){var t="timeout"in this?this.timeout:750;this._holdTimer=setTimeout(function(){this._requestAccept(e),this._fireEvent(a,e,{target:e.target}),this._forgetAccept()}.bind(this),t)},move:function(e){this._touchWasMoved(e)&&this._cancel(e)},_touchWasMoved:function(e){var t=(0,n.hM)(this._startEventData,(0,n.a0)(e));return o(t.x)>5||o(t.y)>5},end:function(){this._stopTimer()},_stopTimer:function(){clearTimeout(this._holdTimer)},cancel:function(){this._stopTimer()},dispose:function(){this._stopTimer()}});(0,r.Z)({emitter:l,bubble:!0,events:[a]});const d={name:a}},73311:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(86043),s=i(57131),r=i(17118),o=i(59351),a=s.Z.inherit({ctor:function(e,t,i){this._$element=e,this._options=t,this._rawData=i,(0,o.nf)(e,this,this._dispose),this._render()},_render:function(){var e=(0,n.Z)("<div>").addClass("dx-item-content-placeholder");this._$element.append(e),this._watchers=[],this._renderWatchers()},_renderWatchers:function(){this._startWatcher("disabled",this._renderDisabled.bind(this)),this._startWatcher("visible",this._renderVisible.bind(this))},_startWatcher:function(e,t){var i,n,s,r,o,a=this._rawData,l=this._options.fieldGetter(e),d=(i=this._options.watchMethod(),n=function(){return l(a)},s=function(e,i){this._dirty=!0,t(e,i)}.bind(this),{dispose:i(n,o=function(e){r!==e&&(s(e,r),r=e)}),force:function(){o(n())}});this._watchers.push(d)},setDataField:function(){if(this._dirty=!1,(0,r.S6)(this._watchers,(function(e,t){t.force()})),this._dirty)return!0},_renderDisabled:function(e,t){this._$element.toggleClass("dx-state-disabled",!!e),this._$element.attr("aria-disabled",!!e),this._updateOwnerFocus(e)},_updateOwnerFocus:function(e){var t=this._options.owner;t&&e&&t._resetItemFocus(this._$element)},_renderVisible:function(e,t){this._$element.toggleClass("dx-state-invisible",void 0!==e&&!e)},_dispose:function(){(0,r.S6)(this._watchers,(function(e,t){t.dispose()}))}});a.getInstance=function(e){return(0,o.Bt)(e,this)};const l=a},26442:(e,t,i)=>{i.d(t,{Z:()=>U});var n=i(86043),s=i(18330),r=i(25287),o=i(6232),a=i(80094),l=i(32345),d=i(70508),h=i(6206),c=i(43515),u=i(6343),m=i(17118),_=i(25664),I=i(21678),p=i(2918),f=i(66289),g=i(56851),y=i(13694),S=i(73311),v=i(17580),x=i(25835),C=i(31761),K=i(44409),D=i(24547),F=i(75966),b=i(17922),O="dx-item",E="-content",B="dx-item-content-placeholder",H="dx-template-wrapper",A=/^([^.]+\[\d+\]\.)+([\w.]+)$/,k="up",T="down",Z="left",w="right",R="last",L="first",P=p.Z.inherit({_activeStateUnit:"."+O,_supportedKeys:function(){var e=function(e,t){(0,f.j1)(t)||(t.preventDefault(),t.stopPropagation(),this._moveFocus(e,t))};return(0,u.l)(this.callBase(),{space:function(e){e.preventDefault(),this._enterKeyHandler(e)},enter:this._enterKeyHandler,leftArrow:e.bind(this,Z),rightArrow:e.bind(this,w),upArrow:e.bind(this,k),downArrow:e.bind(this,T),pageUp:e.bind(this,k),pageDown:e.bind(this,T),home:e.bind(this,L),end:e.bind(this,R)})},_enterKeyHandler:function(e){var t=(0,n.Z)(this.option("focusedElement"));if(t.length){var i=this._getItemData(t);null!=i&&i.onClick&&this._itemEventHandlerByHandler(t,i.onClick,{event:e}),this._itemClickHandler((0,u.l)({},e,{target:t.get(0),currentTarget:t.get(0)}))}},_getDefaultOptions:function(){return(0,u.l)(this.callBase(),{selectOnFocus:!1,loopItemFocus:!0,items:[],itemTemplate:"item",onItemRendered:null,onItemClick:null,onItemHold:null,itemHoldTimeout:750,onItemContextMenu:null,onFocusedItemChanged:null,noDataText:x.Z.format("dxCollectionWidget-noDataText"),encodeNoDataText:!1,dataSource:null,_dataController:null,_itemAttributes:{},itemTemplateProperty:"template",focusOnSelectedItem:!0,focusedElement:null,displayExpr:void 0,disabledExpr:function(e){return e?e.disabled:void 0},visibleExpr:function(e){return e?e.visible:void 0}})},_init:function(){this._compileDisplayGetter(),this._initDataController(),this.callBase(),this._cleanRenderedItems(),this._refreshDataSource()},_compileDisplayGetter:function(){var e=this.option("displayExpr");this._displayGetter=e?(0,K.vb)(this.option("displayExpr")):void 0},_initTemplates:function(){this._initItemsFromMarkup(),this._initDefaultItemTemplate(),this.callBase()},_getAnonymousTemplateName:function(){return"item"},_initDefaultItemTemplate:function(){var e=this._getFieldsMap();this._templateManager.addDefaultTemplates({item:new b.c(function(t,i){(0,h.PO)(i)?this._prepareDefaultItemTemplate(i,t):(e&&(0,h.mf)(e.text)&&(i=e.text(i)),t.text(String((0,o.IS)(i,""))))}.bind(this),this._getBindableFields(),this.option("integrationOptions.watchMethod"),e)})},_getBindableFields:function(){return["text","html"]},_getFieldsMap:function(){if(this._displayGetter)return{text:this._displayGetter}},_prepareDefaultItemTemplate:function(e,t){(0,h.$K)(e.text)&&t.text(e.text),(0,h.$K)(e.html)&&t.html(e.html)},_initItemsFromMarkup:function(){var e=(0,a.hK)(this.$element(),"dxItem");if(e.length&&!this.option("items").length){var t=e.map((e=>{var{element:t,options:i}=e;return/\S/.test(t.innerHTML)&&!i.template?i.template=this._prepareItemTemplate(t):(0,n.Z)(t).remove(),i}));this.option("items",t)}},_prepareItemTemplate:function(e){var t="tmpl-"+new I.Z,i=(0,n.Z)(e).detach().clone().removeAttr("data-options").addClass(H);return this._saveTemplate(t,i),t},_dataSourceOptions:function(){return{paginate:!1}},_cleanRenderedItems:function(){this._renderedItemsCount=0},_focusTarget:function(){return this.$element()},_focusInHandler:function(e){if(this.callBase.apply(this,arguments),this._isFocusTarget(e.target)){var t=(0,n.Z)(this.option("focusedElement"));if(t.length)this._setFocusedItem(t);else{var i=this._getActiveItem();i.length&&this.option("focusedElement",(0,l.u)(i))}}},_focusOutHandler:function(){this.callBase.apply(this,arguments);var e=(0,n.Z)(this.option("focusedElement"));this._updateFocusedItemState(e,!1)},_findActiveTarget(e){return e.find(this._activeStateUnit)},_getActiveItem:function(e){var t=(0,n.Z)(this.option("focusedElement"));if(t.length)return t;var i=this.option("focusOnSelectedItem")?this.option("selectedIndex"):0,s=this._getActiveElement(),r=s.length-1;return i<0&&(i=e?r:0),s.eq(i)},_moveFocus:function(e){var t,i=this._getAvailableItems();switch(e){case"pageup":case k:t=this._prevItem(i);break;case"pagedown":case T:t=this._nextItem(i);break;case w:t=this.option("rtlEnabled")?this._prevItem(i):this._nextItem(i);break;case Z:t=this.option("rtlEnabled")?this._nextItem(i):this._prevItem(i);break;case L:t=i.first();break;case R:t=i.last();break;default:return!1}0!==t.length&&this.option("focusedElement",(0,l.u)(t))},_getVisibleItems:function(e){return(e=e||this._itemElements()).filter(":visible")},_getAvailableItems:function(e){return this._getVisibleItems(e)},_prevItem:function(e){var t=this._getActiveItem(),i=e.index(t),s=e.last(),r=(0,n.Z)(e[i-1]),o=this.option("loopItemFocus");return 0===r.length&&o&&(r=s),r},_nextItem:function(e){var t=this._getActiveItem(!0),i=e.index(t),s=e.first(),r=(0,n.Z)(e[i+1]),o=this.option("loopItemFocus");return 0===r.length&&o&&(r=s),r},_selectFocusedItem:function(e){this.selectItem(e)},_updateFocusedItemState:function(e,t,i){var s=(0,n.Z)(e);s.length&&(this._refreshActiveDescendant(),this._refreshItemId(s,i),this._toggleFocusClass(t,s)),this._updateParentActiveDescendant()},_refreshActiveDescendant:function(e){this.setAria("activedescendant",(0,h.$K)(this.option("focusedElement"))?this.getFocusedItemId():null,e)},_refreshItemId:function(e,t){!t&&this.option("focusedElement")?this.setAria("id",this.getFocusedItemId(),e):this.setAria("id",null,e)},_isDisabled:e=>e&&"true"===(0,n.Z)(e).attr("aria-disabled"),_setFocusedItem:function(e){if(e&&e.length){this._updateFocusedItemState(e,!0),this.onFocusedItemChanged(this.getFocusedItemId());var{selectOnFocus:t}=this.option(),i=this._isDisabled(e);t&&!i&&this._selectFocusedItem(e)}},_findItemElementByItem:function(e){var t=(0,n.Z)(),i=this;return this.itemElements().each((function(){var s=(0,n.Z)(this);if(s.data(i._itemDataKey())===e)return t=s,!1})),t},_getIndexByItem:function(e){return this.option("items").indexOf(e)},_itemOptionChanged:function(e,t,i,n){var s=this._findItemElementByItem(e);s.length&&(this.constructor.ItemClass.getInstance(s).setDataField(t,i)||this._refreshItem(s,e),"disabled"===t&&i&&this._resetItemFocus(s))},_resetItemFocus(e){e.is(this.option("focusedElement"))&&this.option("focusedElement",null)},_refreshItem:function(e){var t=this._getItemData(e),i=e.data(this._itemIndexKey());this._renderItem(this._renderedItemsCount+i,t,null,e)},_updateParentActiveDescendant:o.ZT,_optionChanged:function(e){if("items"===e.name){var t=e.fullName.match(A);if(t&&t.length){var i=t[t.length-1],s=e.fullName.replace("."+i,""),r=this.option(s);return void this._itemOptionChanged(r,i,e.value,e.previousValue)}}switch(e.name){case"items":case"_itemAttributes":case"itemTemplateProperty":case"useItemTextAsTitle":this._cleanRenderedItems(),this._invalidate();break;case"dataSource":this._refreshDataSource(),this._renderEmptyMessage();break;case"noDataText":case"encodeNoDataText":this._renderEmptyMessage();break;case"itemTemplate":case"visibleExpr":case"disabledExpr":this._invalidate();break;case"onItemRendered":this._createItemRenderAction();break;case"onItemClick":case"selectOnFocus":case"loopItemFocus":case"focusOnSelectedItem":break;case"onItemHold":case"itemHoldTimeout":this._attachHoldEvent();break;case"onItemContextMenu":this._attachContextMenuEvent();break;case"onFocusedItemChanged":this.onFocusedItemChanged=this._createActionByOption("onFocusedItemChanged");break;case"focusedElement":this._updateFocusedItemState(e.previousValue,!1,!0),this._setFocusedItem((0,n.Z)(e.value));break;case"displayExpr":this._compileDisplayGetter(),this._initDefaultItemTemplate(),this._invalidate();break;default:this.callBase(e)}},_invalidate:function(){return this.option("focusedElement",null),this.callBase.apply(this,arguments)},_loadNextPage:function(){return this._expectNextPageLoading(),this._dataController.loadNextPage()},_expectNextPageLoading:function(){this._startIndexForAppendedItems=0},_expectLastItemLoading:function(){this._startIndexForAppendedItems=-1},_forgetNextPageLoading:function(){this._startIndexForAppendedItems=null},_dataSourceChangedHandler:function(e){var t=this.option("items");this._initialized&&t&&this._shouldAppendItems()?(this._renderedItemsCount=t.length,this._isLastPage()&&-1===this._startIndexForAppendedItems||(this.option().items=t.concat(e.slice(this._startIndexForAppendedItems))),this._forgetNextPageLoading(),this._refreshContent()):this.option("items",e.slice())},_refreshContent:function(){this._prepareContent(),this._renderContent()},_dataSourceLoadErrorHandler:function(){this._forgetNextPageLoading(),this.option("items",this.option("items"))},_shouldAppendItems:function(){return null!=this._startIndexForAppendedItems&&this._allowDynamicItemsAppend()},_allowDynamicItemsAppend:function(){return!1},_clean:function(){this._cleanFocusState(),this._cleanItemContainer(),this._inkRipple&&delete this._inkRipple,this._resetActiveState()},_cleanItemContainer:function(){(0,n.Z)(this._itemContainer()).empty()},_dispose:function(){this.callBase(),clearTimeout(this._itemFocusTimeout)},_refresh:function(){this._cleanRenderedItems(),this.callBase.apply(this,arguments)},_itemContainer:function(){return this.$element()},_itemClass:function(){return O},_itemContentClass:function(){return this._itemClass()+E},_selectedItemClass:function(){return"dx-item-selected"},_itemResponseWaitClass:function(){return"dx-item-response-wait"},_itemSelector:function(){return"."+this._itemClass()},_itemDataKey:function(){return"dxItemData"},_itemIndexKey:function(){return"dxItemIndex"},_itemElements:function(){return this._itemContainer().find(this._itemSelector())},_initMarkup:function(){this.callBase(),this.onFocusedItemChanged=this._createActionByOption("onFocusedItemChanged"),this.$element().addClass("dx-collection"),this._prepareContent()},_prepareContent:(0,o.Rg)((function(){this._renderContentImpl()})),_renderContent:function(){this._fireContentReadyAction()},_render:function(){this.callBase(),this._attachClickEvent(),this._attachHoldEvent(),this._attachContextMenuEvent()},_getPointerEvent:()=>g.Z.down,_attachClickEvent(){var e=this._itemSelector(),t=this._getPointerEvent(),i=(0,f.V4)(D.u,this.NAME),r=(0,f.V4)(t,this.NAME),o=new _.Z((e=>{var{event:t}=e;this._itemPointerDownHandler(t)}));s.Z.off(this._itemContainer(),i,e),s.Z.off(this._itemContainer(),r,e),s.Z.on(this._itemContainer(),i,e,(e=>this._itemClickHandler(e))),s.Z.on(this._itemContainer(),r,e,(e=>{o.execute({element:(0,n.Z)(e.target),event:e})}))},_itemClickHandler:function(e,t,i){this._itemDXEventHandler(e,"onItemClick",t,i)},_itemPointerDownHandler:function(e){this.option("focusStateEnabled")&&(this._itemFocusHandler=function(){if(clearTimeout(this._itemFocusTimeout),this._itemFocusHandler=null,!e.isDefaultPrevented()){var t=(0,n.Z)(e.target),i=t.closest(this._itemElements()),s=this._closestFocusable(t);i.length&&this._isFocusTarget(null==s?void 0:s.get(0))&&this.option("focusedElement",(0,l.u)(i))}}.bind(this),this._itemFocusTimeout=setTimeout(this._forcePointerDownFocus.bind(this)))},_closestFocusable:function(e){if(e.is(v.KW))return e;for(e=e.parent();e.length&&!d.default.isDocument(e.get(0))&&!d.default.isDocumentFragment(e.get(0));){if(e.is(v.KW))return e;e=e.parent()}},_forcePointerDownFocus:function(){this._itemFocusHandler&&this._itemFocusHandler()},_updateFocusState:function(){this.callBase.apply(this,arguments),this._forcePointerDownFocus()},_attachHoldEvent:function(){var e=this._itemContainer(),t=this._itemSelector(),i=(0,f.V4)(C.Z.name,this.NAME);s.Z.off(e,i,t),s.Z.on(e,i,t,{timeout:this._getHoldTimeout()},this._itemHoldHandler.bind(this))},_getHoldTimeout:function(){return this.option("itemHoldTimeout")},_shouldFireHoldEvent:function(){return this.hasActionSubscription("onItemHold")},_itemHoldHandler:function(e){this._shouldFireHoldEvent()?this._itemDXEventHandler(e,"onItemHold"):e.cancel=!0},_attachContextMenuEvent:function(){var e=this._itemContainer(),t=this._itemSelector(),i=(0,f.V4)(F.u,this.NAME);s.Z.off(e,i,t),s.Z.on(e,i,t,this._itemContextMenuHandler.bind(this))},_shouldFireContextMenuEvent:function(){return this.hasActionSubscription("onItemContextMenu")},_itemContextMenuHandler:function(e){this._shouldFireContextMenuEvent()?this._itemDXEventHandler(e,"onItemContextMenu"):e.cancel=!0},_renderContentImpl:function(){var e=this.option("items")||[];this._renderedItemsCount?this._renderItems(e.slice(this._renderedItemsCount)):this._renderItems(e)},_renderItems:function(e){e.length&&(0,m.S6)(e,function(e,t){this._renderItem(this._renderedItemsCount+e,t)}.bind(this)),this._renderEmptyMessage()},_renderItem:function(e,t,i,n){var s,r=null!==(s=null==e?void 0:e.item)&&void 0!==s?s:e;i=i||this._itemContainer();var o=this._renderItemFrame(r,t,i,n);this._setElementData(o,t,r),o.attr(this.option("_itemAttributes")),this._attachItemClickEvent(t,o);var a=this._getItemContent(o),d=this._renderItemContent({index:r,itemData:t,container:(0,l.u)(a),contentClass:this._itemContentClass(),defaultTemplateName:this.option("itemTemplate")}),h=this;return(0,c.gx)(d).done((function(i){h._postprocessRenderItem({itemElement:o,itemContent:i,itemData:t,itemIndex:r}),h._executeItemRenderAction(e,t,(0,l.u)(o))})),o},_getItemContent:function(e){var t=e.find("."+B);return t.removeClass(B),t},_attachItemClickEvent:function(e,t){e&&e.onClick&&s.Z.on(t,D.u,function(i){this._itemEventHandlerByHandler(t,e.onClick,{event:i})}.bind(this))},_renderItemContent:function(e){var t=this._getItemTemplateName(e),i=this._getTemplate(t);this._addItemContentClasses(e);var s=(0,n.Z)(this._createItemByTemplate(i,e));return s.hasClass(H)?this._renderItemContentByNode(e,s):e.container},_renderItemContentByNode:function(e,t){return(0,n.Z)(e.container).replaceWith(t),e.container=(0,l.u)(t),this._addItemContentClasses(e),t},_addItemContentClasses:function(e){var t=[O+E,e.contentClass];(0,n.Z)(e.container).addClass(t.join(" "))},_appendItemToContainer:function(e,t,i){t.appendTo(e)},_renderItemFrame:function(e,t,i,s){var r=(0,n.Z)("<div>");if(new this.constructor.ItemClass(r,this._itemOptions(),t||{}),s&&s.length?s.replaceWith(r):this._appendItemToContainer.call(this,i,r,e),this.option("useItemTextAsTitle")){var o=this._displayGetter?this._displayGetter(t):t;r.attr("title",o)}return r},_itemOptions:function(){var e=this;return{watchMethod:function(){return e.option("integrationOptions.watchMethod")},owner:e,fieldGetter:function(t){var i=e.option(t+"Expr");return(0,K.vb)(i)}}},_postprocessRenderItem:o.ZT,_executeItemRenderAction:function(e,t,i){this._getItemRenderAction()({itemElement:i,itemIndex:e,itemData:t})},_setElementData:function(e,t,i){e.addClass([O,this._itemClass()].join(" ")).data(this._itemDataKey(),t).data(this._itemIndexKey(),i)},_createItemRenderAction:function(){return this._itemRenderAction=this._createActionByOption("onItemRendered",{element:this.element(),excludeValidators:["disabled","readOnly"],category:"rendering"})},_getItemRenderAction:function(){return this._itemRenderAction||this._createItemRenderAction()},_getItemTemplateName:function(e){var t=e.itemData,i=e.templateProperty||this.option("itemTemplateProperty");return t&&t[i]||e.defaultTemplateName},_createItemByTemplate:function(e,t){return e.render({model:t.itemData,container:t.container,index:t.index,onRendered:this._onItemTemplateRendered(e,t)})},_onItemTemplateRendered:function(){return o.ZT},_emptyMessageContainer:function(){return this._itemContainer()},_renderEmptyMessage:function(e){e=e||this.option("items");var t=this.option("noDataText"),i=!t||e&&e.length||this._dataController.isLoading();i&&this._$noData&&(this._$noData.remove(),this._$noData=null,this.setAria("label",void 0)),i||(this._$noData=this._$noData||(0,n.Z)("<div>").addClass("dx-empty-message"),this._$noData.appendTo(this._emptyMessageContainer()),this.option("encodeNoDataText")?this._$noData.text(t):this._$noData.html(t)),this.$element().toggleClass("dx-empty-collection",!i)},_itemDXEventHandler:function(e,t,i,n){this._itemEventHandler(e.target,t,(0,u.l)(i,{event:e}),n)},_itemEventHandler:function(e,t,i,n){var s=this._createActionByOption(t,(0,u.l)({validatingTargetName:"itemElement"},n));return this._itemEventHandlerImpl(e,s,i)},_itemEventHandlerByHandler:function(e,t,i,n){var s=this._createAction(t,(0,u.l)({validatingTargetName:"itemElement"},n));return this._itemEventHandlerImpl(e,s,i)},_itemEventHandlerImpl:function(e,t,i){var s=this._closestItemElement((0,n.Z)(e)),r=(0,u.l)({},i);return t((0,u.l)(i,this._extendActionArgs(s),r))},_extendActionArgs:function(e){return{itemElement:(0,l.u)(e),itemIndex:this._itemElements().index(e),itemData:this._getItemData(e)}},_closestItemElement:function(e){return(0,n.Z)(e).closest(this._itemSelector())},_getItemData:function(e){return(0,n.Z)(e).data(this._itemDataKey())},_getSummaryItemsWidth:function(e,t){var i=0;return e&&(0,m.S6)(e,(function(e,n){i+=(0,r.Y_)(n,t||!1)})),i},getFocusedItemId:function(){return this._focusedItemId||(this._focusedItemId="dx-"+new I.Z),this._focusedItemId},itemElements:function(){return this._itemElements()},itemsContainer:function(){return this._itemContainer()}}).include(y.Z);P.ItemClass=S.Z;const M=P;var N=i(87838),W=i(13390),q=i(83352),z=i(73416),$=i(7306),V="dxItemDeleting",j=function(e){return-1!==e},G=M.inherit({_setOptionsByReference:function(){this.callBase(),(0,u.l)(this._optionsByReference,{selectedItem:!0})},_getDefaultOptions:function(){return(0,u.l)(this.callBase(),{selectionMode:"none",selectionRequired:!1,selectByClick:!0,selectedItems:[],selectedItemKeys:[],maxFilterLengthInRequest:1500,keyExpr:null,selectedIndex:-1,selectedItem:null,onSelectionChanged:null,onItemReordered:null,onItemDeleting:null,onItemDeleted:null})},ctor:function(e,t){this._userOptions=t||{},this.callBase(e,t)},_init:function(){this._initEditStrategy(),this.callBase(),this._initKeyGetter(),this._initSelectionModule()},_initKeyGetter:function(){this._keyGetter=(0,K.vb)(this.option("keyExpr"))},_getKeysByItems:function(e){return this._editStrategy.getKeysByItems(e)},_getItemsByKeys:function(e,t){return this._editStrategy.getItemsByKeys(e,t)},_getKeyByIndex:function(e){return this._editStrategy.getKeyByIndex(e)},_getIndexByKey:function(e){return this._editStrategy.getIndexByKey(e)},_getIndexByItemData:function(e){return this._editStrategy.getIndexByItemData(e)},_isKeySpecified:function(){return!!this._dataController.key()},_getCombinedFilter:function(){return this._dataController.filter()},key:function(){return this.option("keyExpr")?this.option("keyExpr"):this._dataController.key()},keyOf:function(e){var t=e;return this.option("keyExpr")?t=this._keyGetter(e):this._dataController.store()&&(t=this._dataController.keyOf(e)),t},_nullValueSelectionSupported:function(){return!1},_initSelectionModule:function(){var e=this,t=e._editStrategy.itemsGetter;this._selection=new $.Z({allowNullValue:this._nullValueSelectionSupported(),mode:this.option("selectionMode"),maxFilterLengthInRequest:this.option("maxFilterLengthInRequest"),equalByReference:!this._isKeySpecified(),onSelectionChanged:function(t){(t.addedItemKeys.length||t.removedItemKeys.length)&&(e.option("selectedItems",e._getItemsByKeys(t.selectedItemKeys,t.selectedItems)),e._updateSelectedItems(t))},filter:e._getCombinedFilter.bind(e),totalCount:function(){var t=e.option("items"),i=e._dataController.totalCount();return i>=0?i:e._getItemsCount(t)},key:e.key.bind(e),keyOf:e.keyOf.bind(e),load:function(t){var i,n=e._dataController;return t.customQueryParams=null===(i=n.loadOptions())||void 0===i?void 0:i.customQueryParams,t.userData=n.userData(),n.store()?n.loadFromStore(t).done((function(t){if(!e._disposed){var i=(0,z.r6)(t).data;n.applyMapFunction(i)}})):(new c.BH).resolve(this.plainItems())},dataFields:function(){return e._dataController.select()},plainItems:t.bind(e._editStrategy)})},_getItemsCount:function(e){return e.reduce(((e,t)=>e+(t.items?this._getItemsCount(t.items):1)),0)},_initEditStrategy:function(){var e=W.Z;this._editStrategy=new e(this)},_getSelectedItemIndices:function(e){var t=this,i=[];return e=e||this._selection.getSelectedItemKeys(),t._editStrategy.beginCache(),(0,m.S6)(e,(function(e,n){var s=t._getIndexByKey(n);j(s)&&i.push(s)})),t._editStrategy.endCache(),i},_initMarkup:function(){this._rendering=!0,this._dataController.isLoading()||this._syncSelectionOptions().done((()=>this._normalizeSelectedItems())),this.callBase()},_render:function(){this.callBase(),this._rendering=!1},_fireContentReadyAction:function(){this._rendering=!1,this._rendered=!0,this.callBase.apply(this,arguments)},_syncSelectionOptions:function(e){var t,i,n,s;switch(e=e||this._chooseSelectOption()){case"selectedIndex":t=this._editStrategy.getItemDataByIndex(this.option("selectedIndex")),(0,h.$K)(t)?(this._setOptionWithoutOptionChange("selectedItems",[t]),this._setOptionWithoutOptionChange("selectedItem",t),this._setOptionWithoutOptionChange("selectedItemKeys",this._editStrategy.getKeysByItems([t]))):(this._setOptionWithoutOptionChange("selectedItems",[]),this._setOptionWithoutOptionChange("selectedItemKeys",[]),this._setOptionWithoutOptionChange("selectedItem",null));break;case"selectedItems":if(i=(s=this.option("selectedItems")||[]).length?this._editStrategy.getIndexByItemData(s[0]):-1,this.option("selectionRequired")&&!j(i))return this._syncSelectionOptions("selectedIndex");this._setOptionWithoutOptionChange("selectedItem",s[0]),this._setOptionWithoutOptionChange("selectedIndex",i),this._setOptionWithoutOptionChange("selectedItemKeys",this._editStrategy.getKeysByItems(s));break;case"selectedItem":if(t=this.option("selectedItem"),i=this._editStrategy.getIndexByItemData(t),this.option("selectionRequired")&&!j(i))return this._syncSelectionOptions("selectedIndex");(0,h.$K)(t)?(this._setOptionWithoutOptionChange("selectedItems",[t]),this._setOptionWithoutOptionChange("selectedIndex",i),this._setOptionWithoutOptionChange("selectedItemKeys",this._editStrategy.getKeysByItems([t]))):(this._setOptionWithoutOptionChange("selectedItems",[]),this._setOptionWithoutOptionChange("selectedItemKeys",[]),this._setOptionWithoutOptionChange("selectedIndex",-1));break;case"selectedItemKeys":if(n=this.option("selectedItemKeys"),this.option("selectionRequired")){var r=this._getIndexByKey(n[0]);if(!j(r))return this._syncSelectionOptions("selectedIndex")}return this._selection.setSelection(n)}return(new c.BH).resolve().promise()},_chooseSelectOption:function(){var e="selectedIndex",t=function(e){var t=this.option(e);return(0,h.$K)(t)&&t.length||e in this._userOptions}.bind(this);return t("selectedItems")?e="selectedItems":t("selectedItem")?e="selectedItem":t("selectedItemKeys")&&(e="selectedItemKeys"),e},_compareKeys:function(e,t){if(e.length!==t.length)return!1;for(var i=0;i<t.length;i++)if(e[i]!==t[i])return!1;return!0},_normalizeSelectedItems:function(){if("none"===this.option("selectionMode"))this._setOptionWithoutOptionChange("selectedItems",[]),this._syncSelectionOptions("selectedItems");else if("single"===this.option("selectionMode")){var e=this.option("selectedItems");if(e.length>1||!e.length&&this.option("selectionRequired")&&this.option("items")&&this.option("items").length){var t=this._selection.getSelectedItems(),i=void 0===e[0]?t[0]:e[0];return void 0===i&&(i=this._editStrategy.itemsGetter()[0]),this.option("grouped")&&i&&i.items&&(i.items=[i.items[0]]),this._selection.setSelection(this._getKeysByItems([i])),this._setOptionWithoutOptionChange("selectedItems",[i]),this._syncSelectionOptions("selectedItems")}this._selection.setSelection(this._getKeysByItems(e))}else{var n=this._getKeysByItems(this.option("selectedItems")),s=this._selection.getSelectedItemKeys();this._compareKeys(s,n)||this._selection.setSelection(n)}return(new c.BH).resolve().promise()},_itemClickHandler:function(e){var t=(new c.BH).resolve(),i=this.callBase;this._createAction(function(e){var i;t=null!==(i=this._itemSelectHandler(e.event))&&void 0!==i?i:t}.bind(this),{validatingTargetName:"itemElement"})({itemElement:(0,n.Z)(e.currentTarget),event:e}),t.always((()=>{i.apply(this,arguments)}))},_itemSelectHandler:function(e){var t,i;if(this.option("selectByClick")){var n=e.currentTarget;return this.isItemSelected(n)?this.unselectItem(e.currentTarget):i=this.selectItem(e.currentTarget),null===(t=i)||void 0===t?void 0:t.promise()}},_selectedItemElement:function(e){return this._itemElements().eq(e)},_postprocessRenderItem:function(e){if("none"!==this.option("selectionMode")){var t=(0,n.Z)(e.itemElement),i=this._editStrategy.getNormalizedIndex(t),s=this._isItemSelected(i);this._processSelectableItem(t,s)}},_processSelectableItem:function(e,t){e.toggleClass(this._selectedItemClass(),t),this._setAriaSelectionAttribute(e,String(t))},_updateSelectedItems:function(e){var t=this,i=e.addedItemKeys,n=e.removedItemKeys;if(t._rendered&&(i.length||n.length)){var s=t._selectionChangePromise;if(!t._rendering){var r,o=[],a=[];t._editStrategy.beginCache();for(var l=0;l<i.length;l++)r=t._getIndexByKey(i[l]),o.push(r),t._addSelection(r);for(var d=0;d<n.length;d++)r=t._getIndexByKey(n[d]),a.push(r),t._removeSelection(r);t._editStrategy.endCache(),t._updateSelection(o,a)}(0,c.gx)(s).done((function(){t._fireSelectionChangeEvent(e.addedItems,e.removedItems)}))}},_fireSelectionChangeEvent:function(e,t){this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})({addedItems:e,removedItems:t})},_updateSelection:o.ZT,_setAriaSelectionAttribute:function(e,t){this.setAria("selected",t,e)},_removeSelection:function(e){var t=this._editStrategy.getItemElement(e);j(e)&&(this._processSelectableItem(t,!1),s.Z.triggerHandler(t,"stateChanged",!1))},_addSelection:function(e){var t=this._editStrategy.getItemElement(e);j(e)&&(this._processSelectableItem(t,!0),s.Z.triggerHandler(t,"stateChanged",!0))},_isItemSelected:function(e){var t=this._getKeyByIndex(e);return this._selection.isItemSelected(t,{checkPending:!0})},_optionChanged:function(e){switch(e.name){case"selectionMode":this._invalidate();break;case"dataSource":(!e.value||Array.isArray(e.value)&&!e.value.length)&&this.option("selectedItemKeys",[]),this.callBase(e);break;case"selectedIndex":case"selectedItem":case"selectedItems":case"selectedItemKeys":this._syncSelectionOptions(e.name).done((()=>this._normalizeSelectedItems()));break;case"keyExpr":this._initKeyGetter();break;case"selectionRequired":this._normalizeSelectedItems();break;case"selectByClick":case"onSelectionChanged":case"onItemDeleting":case"onItemDeleted":case"onItemReordered":case"maxFilterLengthInRequest":break;default:this.callBase(e)}},_clearSelectedItems:function(){this._setOptionWithoutOptionChange("selectedItems",[]),this._syncSelectionOptions("selectedItems")},_waitDeletingPrepare:function(e){if(e.data(V))return(new c.BH).resolve().promise();e.data(V,!0);var t=new c.BH,i={cancel:!1},n=this._itemEventHandler(e,"onItemDeleting",i,{excludeValidators:["disabled","readOnly"]});return(0,c.gx)(n).always(function(s){var r=!n,o=!r&&"resolved"===n.state(),a=!!arguments.length,l=r||o&&!a||o&&s;(0,c.gx)((0,c.p4)(i.cancel)).always((function(){e.data(V,!1)})).done((function(e){l&&!e?t.resolve():t.reject()})).fail(t.reject)}.bind(this)),t.promise()},_deleteItemFromDS:function(e){var t=this._dataController,i=new c.BH,n=this.option("disabled"),s=t.store();if(!s)return(new c.BH).resolve().promise();if(!s.remove)throw N.Z.Error("E1011");return this.option("disabled",!0),s.remove(t.keyOf(this._getItemData(e))).done((function(e){void 0!==e?i.resolve():i.reject()})).fail((function(){i.reject()})),i.always(function(){this.option("disabled",n)}.bind(this)),i},_tryRefreshLastPage:function(){var e=new c.BH;return this._isLastPage()||this.option("grouped")?e.resolve():this._refreshLastPage().done((function(){e.resolve()})),e.promise()},_refreshLastPage:function(){return this._expectLastItemLoading(),this._dataController.load()},_updateSelectionAfterDelete:function(e){var t=this._getKeyByIndex(e);this._selection.deselect([t])},_updateIndicesAfterIndex:function(e){for(var t=this._itemElements(),i=e+1;i<t.length;i++)(0,n.Z)(t[i]).data(this._itemIndexKey(),i-1)},_simulateOptionChange:function(e){var t=this.option(e);t instanceof q.o||this._optionChangedAction({name:e,fullName:e,value:t})},isItemSelected:function(e){return this._isItemSelected(this._editStrategy.getNormalizedIndex(e))},selectItem:function(e){if("none"!==this.option("selectionMode")){var t=this._editStrategy.getNormalizedIndex(e);if(j(t)){var i=this._getKeyByIndex(t);if(!this._selection.isItemSelected(i)){if("single"===this.option("selectionMode"))return this._selection.setSelection([i]);var n=this.option("selectedItemKeys")||[];return this._selection.setSelection([...n,i],[i])}}}},unselectItem:function(e){var t=this._editStrategy.getNormalizedIndex(e);if(j(t)){var i=this._selection.getSelectedItemKeys();if(!(this.option("selectionRequired")&&i.length<=1)){var n=this._getKeyByIndex(t);this._selection.isItemSelected(n,{checkPending:!0})&&this._selection.deselect([n])}}},_deleteItemElementByIndex:function(e){this._updateSelectionAfterDelete(e),this._updateIndicesAfterIndex(e),this._editStrategy.deleteItemAtIndex(e)},_afterItemElementDeleted:function(e,t){var i=this._dataController.getDataSource()?"dataSource":"items";this._simulateOptionChange(i),this._itemEventHandler(e,"onItemDeleted",t,{beforeExecute:function(){e.remove()},excludeValidators:["disabled","readOnly"]}),this._renderEmptyMessage()},deleteItem:function(e){var t=this,i=new c.BH,n=this._editStrategy.getItemElement(e),s=this._editStrategy.getNormalizedIndex(e),r=this._itemResponseWaitClass();return j(s)?this._waitDeletingPrepare(n).done((function(){n.addClass(r);var e=t._extendActionArgs(n);t._deleteItemFromDS(n).done((function(){t._deleteItemElementByIndex(s),t._afterItemElementDeleted(n,e),t._tryRefreshLastPage().done((function(){i.resolveWith(t)}))})).fail((function(){n.removeClass(r),i.rejectWith(t)}))})).fail((function(){i.rejectWith(t)})):i.rejectWith(t),i.promise()},reorderItem:function(e,t){var i=new c.BH,n=this,s=this._editStrategy,r=s.getItemElement(e),o=s.getItemElement(t),a=s.getNormalizedIndex(e),l=s.getNormalizedIndex(t),d=this._dataController.getDataSource()?"dataSource":"items";return j(a)&&j(l)&&a!==l?i.resolveWith(this):i.rejectWith(this),i.promise().done((function(){o[s.itemPlacementFunc(a,l)](r),s.moveItemAtIndexToIndex(a,l),this._updateIndicesAfterIndex(a),n.option("selectedItems",n._getItemsByKeys(n._selection.getSelectedItemKeys(),n._selection.getSelectedItems())),"items"===d&&n._simulateOptionChange(d),n._itemEventHandler(r,"onItemReordered",{fromIndex:s.getIndex(a),toIndex:s.getIndex(l)},{excludeValidators:["disabled","readOnly"]})}))}});const U=G},13390:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(86043),s=i(57131),r=i(6232),o=i(70508),a=i(6206),l=s.Z.abstract;const d=s.Z.inherit({ctor:function(e){this._collectionWidget=e},getIndexByItemData:l,getItemDataByIndex:l,getKeysByItems:l,getItemsByKeys:l,itemsGetter:l,getKeyByIndex:function(e){var t=this._denormalizeItemIndex(e);return this.getKeysByItems([this.getItemDataByIndex(t)])[0]},_equalKeys:function(e,t){return this._collectionWidget._isKeySpecified()?(0,r.bY)(e,t):e===t},beginCache:function(){this._cache={}},endCache:function(){this._cache=null},getIndexByKey:l,getNormalizedIndex:function(e){return this._isNormalizedItemIndex(e)?e:this._isItemIndex(e)?this._normalizeItemIndex(e):this._isNode(e)?this._getNormalizedItemIndex(e):this._normalizeItemIndex(this.getIndexByItemData(e))},getIndex:function(e){return this._isNormalizedItemIndex(e)?this._denormalizeItemIndex(e):this._isItemIndex(e)?e:this._isNode(e)?this._denormalizeItemIndex(this._getNormalizedItemIndex(e)):this.getIndexByItemData(e)},getItemElement:function(e){if(this._isNormalizedItemIndex(e))return this._getItemByNormalizedIndex(e);if(this._isItemIndex(e))return this._getItemByNormalizedIndex(this._normalizeItemIndex(e));if(this._isNode(e))return(0,n.Z)(e);var t=this._normalizeItemIndex(this.getIndexByItemData(e));return this._getItemByNormalizedIndex(t)},_isNode:e=>o.default.isNode(e&&(0,a.ZU)(e)?e.get(0):e),deleteItemAtIndex:l,itemPlacementFunc:function(e,t){return this._itemsFromSameParent(e,t)&&e<t?"after":"before"},moveItemAtIndexToIndex:l,_isNormalizedItemIndex:function(e){return"number"==typeof e&&Math.round(e)===e},_isItemIndex:l,_getNormalizedItemIndex:l,_normalizeItemIndex:l,_denormalizeItemIndex:l,_getItemByNormalizedIndex:l,_itemsFromSameParent:l}).inherit({_getPlainItems:function(){return this._collectionWidget.option("items")||[]},getIndexByItemData:function(e){var t=this._collectionWidget.keyOf.bind(this._collectionWidget);return t?this.getIndexByKey(t(e)):this._getPlainItems().indexOf(e)},getItemDataByIndex:function(e){return this._getPlainItems()[e]},deleteItemAtIndex:function(e){this._getPlainItems().splice(e,1)},itemsGetter:function(){return this._getPlainItems()},getKeysByItems:function(e){var t=this._collectionWidget.keyOf.bind(this._collectionWidget),i=e;if(t){i=[];for(var n=0;n<e.length;n++)i.push(t(e[n]))}return i},getIndexByKey:function(e){var t=this._cache,i=t&&t.keys||this.getKeysByItems(this._getPlainItems());if(t&&!t.keys&&(t.keys=i),"object"!=typeof e)return i.indexOf(e);for(var n=0,s=i.length;n<s;n++)if(this._equalKeys(e,i[n]))return n;return-1},getItemsByKeys:function(e,t){return(t||e).slice()},moveItemAtIndexToIndex:function(e,t){var i=this._getPlainItems(),n=i[e];i.splice(e,1),i.splice(t,0,n)},_isItemIndex:function(e){return"number"==typeof e&&Math.round(e)===e},_getNormalizedItemIndex:function(e){return this._collectionWidget._itemElements().index(e)},_normalizeItemIndex:function(e){return e},_denormalizeItemIndex:function(e){return e},_getItemByNormalizedIndex:function(e){return e>-1?this._collectionWidget._itemElements().eq(e):null},_itemsFromSameParent:function(){return!0}})},7306:(e,t,i)=>{i.d(t,{Z:()=>I});var n=i(6206),s=i(16093),r=i(6232),o=i(43515);class a{constructor(e){this.options=e,this._setOption("disabledItemKeys",[]),this._clearItemKeys()}_clearItemKeys(){this._setOption("addedItemKeys",[]),this._setOption("removedItemKeys",[]),this._setOption("removedItems",[]),this._setOption("addedItems",[])}validate(){}_setOption(e,t){this.options[e]=t}onSelectionChanged(){var e=this.options.addedItemKeys,t=this.options.removedItemKeys,i=this.options.addedItems,n=this.options.removedItems,s=this.options.selectedItems,o=this.options.selectedItemKeys,a=this.options.onSelectionChanged||r.ZT;this._clearItemKeys(),a({selectedItems:s,selectedItemKeys:o,addedItemKeys:e,removedItemKeys:t,addedItems:i,removedItems:n})}equalKeys(e,t){return this.options.equalByReference&&(0,n.Kn)(e)&&(0,n.Kn)(t)?e===t:(0,r.bY)(e,t)}getSelectableItems(e){return e.filter((function(e){return!(null!=e&&e.disabled)}))}_clearSelection(e,t,i,n){return e=e||[],e=Array.isArray(e)?e:[e],this.validate(),this.selectedItemKeys(e,t,i,n)}_removeTemplateProperty(e){return Array.isArray(e)?e.map((e=>this._removeTemplateProperty(e))):((0,n.Kn)(e)&&delete e.template,e)}_loadFilteredData(e,t,i,r){var a=encodeURI(JSON.stringify(this._removeTemplateProperty(e))).length,l=this.options.maxFilterLengthInRequest&&a>this.options.maxFilterLengthInRequest,d=new o.BH,h={filter:l?void 0:e,select:l?this.options.dataFields():i||this.options.dataFields()};return e&&0===e.length?d.resolve([]):this.options.load(h).done((function(i){var o=(0,n.PO)(i)?i.data:i;t&&!r?o=o.filter(t):l&&(o=(0,s.Z)(o).filter(e).toArray()),d.resolve(o)})).fail(d.reject.bind(d)),d}updateSelectedItemKeyHash(e){for(var t=0;t<e.length;t++){var i=(0,r.k3)(e[t]);(0,n.Kn)(i)||(this.options.keyHashIndices[i]=this.options.keyHashIndices[i]||[],this.options.keyHashIndices[i].push(t))}}_isAnyItemSelected(e){for(var t=0;t<e.length;t++)if(this.options.isItemSelected(e[t]))return;return!1}_getFullSelectAllState(){var e=this.options.plainItems(),t=this.options.filter(),i=this.options.ignoreDisabledItems?this.options.selectedItems:this.options.selectedItems.filter((e=>!(null!=e&&e.disabled)));t&&(i=(0,s.Z)(i).filter(t).toArray());var n=i.length,r=e.length-this.getSelectableItems(e).length;return n?n>=this.options.totalCount()-r||void 0:this._isAnyItemSelected(e)}_getVisibleSelectAllState(){for(var e=this.getSelectableItems(this.options.plainItems()),t=!1,i=!1,n=0;n<e.length;n++){var s=e[n],r=this.options.getItemData(s),o=this.options.keyOf(r);this.options.isSelectableItem(s)&&(this.isItemKeySelected(o)?t=!0:i=!0)}return!!t&&(!i||void 0)}}var l=i(87838);class d extends a{getSelectedItems(){return this._loadFilteredData(this.options.selectionFilter)}getSelectedItemKeys(){var e=new o.BH,t=this,i=this.options.key(),s=(0,n.HD)(i)?[i]:i;return this._loadFilteredData(this.options.selectionFilter,null,s).done((function(i){var n=i.map((function(e){return t.options.keyOf(e)}));e.resolve(n)})).fail(e.reject),e.promise()}selectedItemKeys(e,t,i,n){if(n){var s=this.options.filter();!s||JSON.stringify(s)===JSON.stringify(this.options.selectionFilter)&&i?this._setOption("selectionFilter",i?[]:null):this._addSelectionFilter(i,s,n)}else{t||this._setOption("selectionFilter",[]);for(var r=0;r<e.length;r++)i?this.removeSelectedItem(e[r]):this.addSelectedItem(e[r],n,!t)}return this.onSelectionChanged(),(new o.BH).resolve()}setSelectedItems(e){this._setOption("selectionFilter",null);for(var t=0;t<e.length;t++)this.addSelectedItem(e[t])}isItemDataSelected(e){return this.isItemKeySelected(e)}isItemKeySelected(e){var t=this.options.selectionFilter;return!t||!!(0,s.Z)([e]).filter(t).toArray().length}_getKeyExpr(){var e=this.options.key();return Array.isArray(e)&&1===e.length?e[0]:e}_normalizeKey(e){var t=this.options.key();return Array.isArray(t)&&1===t.length?e[t[0]]:e}_getFilterByKey(e){var t=this._getKeyExpr(),i=[t,"=",this._normalizeKey(e)];if(Array.isArray(t)){i=[];for(var n=0;n<t.length;n++)i.push([t[n],"=",e[t[n]]]),n!==t.length-1&&i.push("and")}return i}addSelectedItem(e,t,i){var n=this._getFilterByKey(e);this._addSelectionFilter(!1,n,t,i)}removeSelectedItem(e){var t=this._getFilterByKey(e);this._addSelectionFilter(!0,t)}validate(){var e=this.options.key;if(e&&void 0===e())throw l.Z.Error("E1042","Deferred selection")}_findSubFilter(e,t){if(!e)return-1;for(var i=JSON.stringify(t),n=0;n<e.length;n++){var s=e[n];if(s&&JSON.stringify(s)===i)return n}return-1}_isLastSubFilter(e,t){return!(!e||!t||this._findSubFilter(e,t)!==e.length-1&&0!==this._findSubFilter([e],t))}_addFilterOperator(e,t){return e.length>1&&(0,n.HD)(e[1])&&e[1]!==t&&(e=[e]),e.length&&e.push(t),e}_denormalizeFilter(e){return e&&(0,n.HD)(e[0])&&(e=[e]),e}_isOnlyNegativeFiltersLeft(e){return e.every(((e,t)=>t%2==0?Array.isArray(e)&&"!"===e[0]:"and"===e))}_addSelectionFilter(e,t,i,n){var s,r=e?["!",t]:t,o=e?"and":"or",a=!0,l=this.options.selectionFilter||[];if(null!==(s=l=this._denormalizeFilter(l))&&void 0!==s&&s.length&&!n){var d=this._removeSameFilter(l,t,e,i),h=this._removeSameFilter(l,t,!e);e&&(-1!==d||-1!==h)&&this._isOnlyNegativeFiltersLeft(l)&&(l=[]);var c=this._isKeyFilter(t)&&this._hasKeyFiltersOnlyStartingFromIndex(l,h);a=t.length&&!c}a&&(l=this._addFilterOperator(l,o)).push(r),l=this._normalizeFilter(l),this._setOption("selectionFilter",e||l.length?l:null)}_normalizeFilter(e){return e&&1===e.length&&(e=e[0]),e}_removeFilterByIndex(e,t,i){var n=e[1];t>0?e.splice(t-1,2):e.splice(t,2),i&&"and"===n&&e.splice(0,e.length)}_isSimpleKeyFilter(e,t){return 3===e.length&&e[0]===t&&"="===e[1]}_isKeyFilter(e){if(2===e.length&&"!"===e[0])return this._isKeyFilter(e[1]);var t=this._getKeyExpr();if(Array.isArray(t)){if(e.length!==2*t.length-1)return!1;for(var i=0;i<t.length;i++){if(i>0&&"and"!==e[2*i-1])return!1;if(!this._isSimpleKeyFilter(e[2*i],t[i]))return!1}return!0}return this._isSimpleKeyFilter(e,t)}_hasKeyFiltersOnlyStartingFromIndex(e,t){if(t>=0){for(var i=t;i<e.length;i++)if("string"!=typeof e[i]&&!this._isKeyFilter(e[i]))return!1;return!0}return!1}_removeSameFilter(e,t,i,n){if(t=i?["!",t]:t,JSON.stringify(t)===JSON.stringify(e))return e.splice(0,e.length),0;var s=this._findSubFilter(e,t);if(s>=0)return this._removeFilterByIndex(e,s,n),s;for(var r=0;r<e.length;r++)if(Array.isArray(e[r])&&e[r].length>2){var o=this._removeSameFilter(e[r],t,!1,n);if(o>=0)return e[r].length?1===e[r].length&&(e[r]=e[r][0]):this._removeFilterByIndex(e,r,n),o}return-1}getSelectAllState(){var e=this.options.filter(),t=this.options.selectionFilter;return!t||!!t.length&&(e&&e.length?(t=this._denormalizeFilter(t),!!this._isLastSubFilter(t,e)||!this._isLastSubFilter(t,["!",e])&&void 0):void 0)}loadSelectedItemsWithFilter(){var e=this.options.filter(),t=this.options.selectionFilter,i=e?[e,"and",t]:t;return this._loadFilteredData(i)}}var h=i(4174),c=i(96708),u=i(49118);class m extends a{constructor(e){super(e),this._initSelectedItemKeyHash()}_initSelectedItemKeyHash(){this._setOption("keyHashIndices",this.options.equalByReference?null:{})}getSelectedItemKeys(){return this.options.selectedItemKeys.slice(0)}getSelectedItems(){return this.options.selectedItems.slice(0)}_preserveSelectionUpdate(e,t){var i,n,s,r=this.options.keyOf;if(r){var o=t&&e.length>1&&!this.options.equalByReference;for(o&&(i={}),s=0;s<e.length;s++){var a=e[s],l=r(a);t?(n=this.removeSelectedItem(l,i,null==a?void 0:a.disabled),i&&n>=0&&(i[n]=!0)):this.addSelectedItem(l,a)}o&&this._batchRemoveSelectedItems(i)}}_batchRemoveSelectedItems(e){var t=this.options.selectedItemKeys.slice(0),i=this.options.selectedItems.slice(0);this.options.selectedItemKeys.length=0,this.options.selectedItems.length=0;for(var n=0;n<t.length;n++)e[n]||(this.options.selectedItemKeys.push(t[n]),this.options.selectedItems.push(i[n]));this._initSelectedItemKeyHash(),this.updateSelectedItemKeyHash(this.options.selectedItemKeys)}_loadSelectedItemsCore(e,t,i,n){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=new o.BH,l=this.options.key();if(!e.length&&!i)return a.resolve([]),a;if(i&&t&&!n)return a.resolve(this.getSelectedItems()),a;var d=new u.M(e,i),h=d.getCombinedFilter(l,n,r),c=[];if(t){var m=this.options.selectedItems;c=h&&e.length!==m.length?(0,s.Z)(m).filter(h).toArray():m.slice(0)}var _=c.length?c:this.options.plainItems(!0).filter(this.options.isSelectableItem).map(this.options.getItemData),I=d.getLocalFilter(this.options.keyOf,this.equalKeys.bind(this),this.options.equalByReference,l);return _=_.filter(I),c.length||!i&&_.length===e.length?a.resolve(_):a=this._loadFilteredData(h,I,null,i),a}_replaceSelectionUpdate(e){var t=[],i=this.options.keyOf;if(i){for(var n=0;n<e.length;n++){var s=i(e[n]);t.push(s)}this.setSelectedItems(t,e)}}_warnOnIncorrectKeys(e){for(var t=this.options.allowNullValue,i=0;i<e.length;i++){var n=e[i];t&&null===n||this.isItemKeySelected(n)||l.Z.log("W1002",n)}}_isMultiSelectEnabled(){var e=this.options.mode;return"all"===e||"multiple"===e}_requestInProgress(){var e;return"pending"===(null===(e=this._lastLoadDeferred)||void 0===e?void 0:e.state())}_concatRequestsItems(e,t,i,n){var s,r=t?e:[];return s=n||(0,h.R1)(e,this.options.selectedItemKeys),{addedItems:i.added.concat(s),removedItems:i.removed.concat(r),keys:e}}_collectLastRequestData(e,t,i,n){var s=t&&i,r={added:[],removed:[]},o=this._isMultiSelectEnabled(),a=o?this._lastRequestData:{};return o&&(this._shouldMergeWithLastRequest&&(s?(this._lastLoadDeferred.reject(),a={}):(0,c.E)(e,this.options.selectedItemKeys)||(r.added=a.addedItems,r.removed=a.removedItems,t||this._lastLoadDeferred.reject())),a=this._concatRequestsItems(e,t,r,this._shouldMergeWithLastRequest?void 0:n)),a}_updateKeysByLastRequestData(e,t,i){var n,s,r=e;return this._isMultiSelectEnabled()&&this._shouldMergeWithLastRequest&&!t&&!i&&(r=(0,h.R1)(e.concat(null===(n=this._lastRequestData)||void 0===n?void 0:n.addedItems),null===(s=this._lastRequestData)||void 0===s?void 0:s.removedItems),r=(0,h.rZ)(r)),r}_loadSelectedItems(e,t,i,n){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=this,a=new o.BH,l=r.options.filter();return this._shouldMergeWithLastRequest=this._requestInProgress(),this._lastRequestData=this._collectLastRequestData(e,t,i,n),(0,o.gx)(r._lastLoadDeferred).always((function(){var n=r._updateKeysByLastRequestData(e,t,i);r._shouldMergeWithLastRequest=!1,r._loadSelectedItemsCore(n,t,i,l,s).done(a.resolve).fail(a.reject)})),r._lastLoadDeferred=a,a}selectedItemKeys(e,t,i,n,s){var r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=this,a=o._loadSelectedItems(e,i,n,s,r);return a.done((function(e){t?o._preserveSelectionUpdate(e,i):o._replaceSelectionUpdate(e),o.onSelectionChanged()})),a}addSelectedItem(e,t){if((0,n.$K)(t)&&!this.options.ignoreDisabledItems&&t.disabled)-1===this.options.disabledItemKeys.indexOf(e)&&this.options.disabledItemKeys.push(e);else{var i=this._getKeyHash(e);-1===this._indexOfSelectedItemKey(i)&&(!(0,n.Kn)(i)&&this.options.keyHashIndices&&(this.options.keyHashIndices[i]=[this.options.selectedItemKeys.length]),this.options.selectedItemKeys.push(e),this.options.addedItemKeys.push(e),this.options.addedItems.push(t),this.options.selectedItems.push(t))}}_getSelectedIndexByKey(e,t){for(var i=this.options.selectedItemKeys,n=0;n<i.length;n++)if((!t||!t[n])&&this.equalKeys(i[n],e))return n;return-1}_getSelectedIndexByHash(e,t){var i=this.options.keyHashIndices[e];return i&&i.length>1&&t&&(i=i.filter((function(e){return!t[e]}))),i&&i[0]>=0?i[0]:-1}_indexOfSelectedItemKey(e,t){return this.options.equalByReference?this.options.selectedItemKeys.indexOf(e):(0,n.Kn)(e)?this._getSelectedIndexByKey(e,t):this._getSelectedIndexByHash(e,t)}_shiftSelectedKeyIndices(e){for(var t=e;t<this.options.selectedItemKeys.length;t++){var i=this.options.selectedItemKeys[t],n=(0,r.k3)(i),s=this.options.keyHashIndices[n];if(s)for(var o=0;o<s.length;o++)s[o]>e&&s[o]--}}removeSelectedItem(e,t,i){if(this.options.ignoreDisabledItems||!i){var s=this._getKeyHash(e),r=!!t,o=this._indexOfSelectedItemKey(s,t);if(o<0)return o;if(this.options.removedItemKeys.push(e),this.options.removedItems.push(this.options.selectedItems[o]),r)return o;if(this.options.selectedItemKeys.splice(o,1),this.options.selectedItems.splice(o,1),(0,n.Kn)(s)||!this.options.keyHashIndices)return o;var a=this.options.keyHashIndices[s];return a?(a.shift(),a.length||delete this.options.keyHashIndices[s],this._shiftSelectedKeyIndices(o),o):o}}_updateAddedItemKeys(e,t){for(var i=0;i<e.length;i++)this.isItemKeySelected(e[i])||(this.options.addedItemKeys.push(e[i]),this.options.addedItems.push(t[i]))}_updateRemovedItemKeys(e,t,i){for(var n=0;n<t.length;n++)this.isItemKeySelected(t[n])||(this.options.removedItemKeys.push(t[n]),this.options.removedItems.push(i[n]))}_isItemSelectionInProgress(e,t){var i;return!!(t&&this._lastRequestData&&this._requestInProgress())&&(null!==(i=this._lastRequestData.addedItems)&&void 0!==i?i:[]).includes(e)}_getKeyHash(e){return this.options.equalByReference?e:(0,r.k3)(e)}setSelectedItems(e,t){this._updateAddedItemKeys(e,t);var i=this.options.selectedItemKeys,n=this.options.selectedItems;this.options.equalByReference||(this._initSelectedItemKeyHash(),this.updateSelectedItemKeyHash(e)),this._setOption("selectedItemKeys",e),this._setOption("selectedItems",t),this._updateRemovedItemKeys(e,i,n)}isItemDataSelected(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.options.keyOf(e);return this.isItemKeySelected(i,t)}isItemKeySelected(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this._isItemSelectionInProgress(e,t.checkPending);if(!i){var n=this._getKeyHash(e);i=-1!==this._indexOfSelectedItemKey(n)}return i}getSelectAllState(e){return e?this._getVisibleSelectAllState():this._getFullSelectAllState()}loadSelectedItemsWithFilter(){var e=this.options.key(),t=this.getSelectedItemKeys(),i=this.options.filter();if(!t.length)return(0,o.BH)().resolve([]);var n=new u.M(t).getCombinedFilter(e,i,!0);return this._loadFilteredData(n)}}var _=i(6343);class I{constructor(e){this.options=(0,_.l)(this._getDefaultOptions(),e,{selectedItemKeys:e.selectedKeys||[]}),this._selectionStrategy=this.options.deferred?new d(this.options):new m(this.options),this._focusedItemIndex=-1,this.options.equalByReference||this._selectionStrategy.updateSelectedItemKeyHash(this.options.selectedItemKeys)}_getDefaultOptions(){return{allowNullValue:!1,deferred:!1,equalByReference:!1,mode:"multiple",selectedItems:[],selectionFilter:[],maxFilterLengthInRequest:0,onSelectionChanged:r.ZT,key:r.ZT,keyOf:function(e){return e},load:function(){return(new o.BH).resolve([])},totalCount:function(){return-1},isSelectableItem:function(){return!0},isItemSelected:function(){return!1},getItemData:function(e){return e},dataFields:r.ZT,filter:r.ZT}}validate(){this._selectionStrategy.validate()}getSelectedItemKeys(){return this._selectionStrategy.getSelectedItemKeys()}getSelectedItems(){return this._selectionStrategy.getSelectedItems()}selectionFilter(e){if(void 0===e)return this.options.selectionFilter;var t=this.options.selectionFilter!==e&&JSON.stringify(this.options.selectionFilter)!==JSON.stringify(e);this.options.selectionFilter=e,t&&this.onSelectionChanged()}setSelection(e,t){return this.selectedItemKeys(e,!1,!1,!1,t)}select(e){return this.selectedItemKeys(e,!0)}deselect(e){return this.selectedItemKeys(e,!0,!0)}selectedItemKeys(e,t,i,n,s){var r;return e=null!==(r=e)&&void 0!==r?r:[],e=Array.isArray(e)?e:[e],this.validate(),this._selectionStrategy.selectedItemKeys(e,t,i,n,s)}clearSelection(){return this.selectedItemKeys([])}_addSelectedItem(e,t){this._selectionStrategy.addSelectedItem(t,e)}_removeSelectedItem(e){this._selectionStrategy.removeSelectedItem(e)}_setSelectedItems(e,t){this._selectionStrategy.setSelectedItems(e,t)}onSelectionChanged(){this._selectionStrategy.onSelectionChanged()}changeItemSelection(e,t,i){var s,r,a,l,d,h=this.options.plainItems(),c=h[e],u=!1,m=!1,_=e=>e>=0&&!h.filter((t=>t.loadIndex===e)).length;if((null===(s=(r=this.options).allowLoadByRange)||void 0===s?void 0:s.call(r))&&(0,n.$K)(c)&&(d=c.loadIndex-e,e=c.loadIndex,u=_(this._focusedItemIndex),(0,n.$K)(this._shiftFocusedItemIndex)&&(m=_(this._shiftFocusedItemIndex))),!this.isSelectable()||!this.isDataItem(c))return!1;var I=this.options.getItemData(c),p=this.options.keyOf(I);if((t=t||{}).shift&&"multiple"===this.options.mode&&this._focusedItemIndex>=0)u||m?(a=e!==this._shiftFocusedItemIndex||this._focusedItemIndex!==this._shiftFocusedItemIndex)&&(l=this.changeItemSelectionWhenShiftKeyInVirtualPaging(e)):a=this.changeItemSelectionWhenShiftKeyPressed(e,h,d);else if(t.control){if(this._resetItemSelectionWhenShiftKeyPressed(),!i){var f=this._selectionStrategy.isItemDataSelected(I);"single"===this.options.mode&&this.clearSelectedItems(),f?this._removeSelectedItem(p):this._addSelectedItem(I,p)}a=!0}else{this._resetItemSelectionWhenShiftKeyPressed();var g=this._selectionStrategy.equalKeys(this.options.selectedItemKeys[0],p);1===this.options.selectedItemKeys.length&&g||(this._setSelectedItems([p],[I]),a=!0)}return a?((0,o.gx)(l).done((()=>{this._focusedItemIndex=e,!i&&this.onSelectionChanged()})),!0):void 0}isDataItem(e){return this.options.isSelectableItem(e)}isSelectable(){return"single"===this.options.mode||"multiple"===this.options.mode}isItemDataSelected(e){return this._selectionStrategy.isItemDataSelected(e,{checkPending:!0})}isItemSelected(e,t){return this._selectionStrategy.isItemKeySelected(e,t)}_resetItemSelectionWhenShiftKeyPressed(){delete this._shiftFocusedItemIndex}_resetFocusedItemIndex(){this._focusedItemIndex=-1}changeItemSelectionWhenShiftKeyInVirtualPaging(e){var t=this.options.getLoadOptions(e,this._focusedItemIndex,this._shiftFocusedItemIndex),i=new o.BH,n=t.skip;return this.options.load(t).done((t=>{this.changeItemSelectionWhenShiftKeyPressed(e,t,n),i.resolve()})),i.promise()}changeItemSelectionWhenShiftKeyPressed(e,t,i){var s,r,o,a,l,d=!1,h=(0,n.$K)(i),c=h?this._focusedItemIndex-i:this._focusedItemIndex,u=this.options.keyOf,m=t[c],_=this.options.getItemData(m),I=u(_),p=m&&this.isItemDataSelected(_);if((0,n.$K)(this._shiftFocusedItemIndex)||(this._shiftFocusedItemIndex=this._focusedItemIndex),this._shiftFocusedItemIndex!==this._focusedItemIndex)for(s=this._focusedItemIndex<this._shiftFocusedItemIndex?1:-1,a=h?this._focusedItemIndex-i:this._focusedItemIndex,l=h?this._shiftFocusedItemIndex-i:this._shiftFocusedItemIndex,c=a;c!==l;c+=s)(h||this.isDataItem(t[c]))&&(o=u(this.options.getItemData(t[c])),this._removeSelectedItem(o),d=!0);if(e!==this._shiftFocusedItemIndex)for(s=e<this._shiftFocusedItemIndex?1:-1,a=h?e-i:e,l=h?this._shiftFocusedItemIndex-i:this._shiftFocusedItemIndex,c=a;c!==l;c+=s)(h||this.isDataItem(t[c]))&&(o=u(r=this.options.getItemData(t[c])),this._addSelectedItem(r,o),d=!0);return!h&&!this.isDataItem(m)||p||(this._addSelectedItem(_,I),d=!0),d}clearSelectedItems(){this._setSelectedItems([],[])}selectAll(e){return this._resetFocusedItemIndex(),e?this._onePageSelectAll(!1):this.selectedItemKeys([],!0,!1,!0)}deselectAll(e){return this._resetFocusedItemIndex(),e?this._onePageSelectAll(!0):this.selectedItemKeys([],!0,!0,!0)}_onePageSelectAll(e){for(var t=this._selectionStrategy.getSelectableItems(this.options.plainItems()),i=0;i<t.length;i++){var n=t[i];if(this.isDataItem(n)){var s=this.options.getItemData(n),r=this.options.keyOf(s),a=this.isItemSelected(r);a||e||this._addSelectedItem(s,r),a&&e&&this._removeSelectedItem(r)}}return this.onSelectionChanged(),(new o.BH).resolve()}getSelectAllState(e){return this._selectionStrategy.getSelectAllState(e)}loadSelectedItemsWithFilter(){return this._selectionStrategy.loadSelectedItemsWithFilter()}}}}]);