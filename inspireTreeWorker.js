!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.nemo=t():e.nemo=t()}(this,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="dist",r(r.s=779)}({12:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GhostContants=void 0;var n=function(){function e(){}return e.Name="Ghost",e}();t.GhostContants=n},14:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QJsonHelper=t.CompSearchKey=void 0;var n,o=r(6);!function(e){e[e.PID=0]="PID",e[e.EditorID=1]="EditorID",e[e.Render=2]="Render"}(n=t.CompSearchKey||(t.CompSearchKey={}));var i=function(){function e(){}return e.ForEachComp=function(e,t,r,n){var o=function(e){var r,i=e.curJson,u=e.path,p=e.parentCompJson,a=e.compiledJson;if(i&&0!==i.length)for(var c=n?-1:1,l=n?i.length-1:0,s=n?-1:i.length,d=l;d!==s;d+=c){var f=i[d],v=null==a?void 0:a[d];if(f){if(u.push(d),!1===t(f,u.map((function(e){return e})),{compName:f.T,eID:f._Editor.eID,parentCompJson:p,compiledJson:v}))return!1;if(f.C)for(var y in f.C){if(u.push(y),!1===o({curJson:f.C[y].c,path:u,parentCompJson:f,compiledJson:null===(r=null==v?void 0:v.C[y])||void 0===r?void 0:r.c}))return!1;u.pop()}u.pop()}}else console.error("curJson is empty or undefined")};o({curJson:e,path:[],compiledJson:r})},e.findComponentByType=function(t,r){var n;return e.ForEachComp(t,(function(e){return e.T!=r||(n=e,!1)})),n},e.prototype.findParentArrayPath=function(t,r){return e.FindParentArrayPath(t,r)},e.FindParentArrayPath=function(e,t){var r,n=null,i=e.pop();if(0==e.length)return{selfIndex:i,parentArray:t,parent:null};for(var u=t,p=new o.TypeHelper,a=0;a<e.length;a++){var c=e[a];u=p.isObject(u)?(null===(r=null==(n=u)?void 0:n.C[c])||void 0===r?void 0:r.c)||[]:u[c]||[]}return{selfIndex:i,parentArray:u,parent:n}},e.prototype.findCompBySearchField=function(t,r,o){return void 0===o&&(o=n.EditorID),e.FindCompBySearchField(t,r,o)},e.FindCompBySearchField=function(t,r,o,i){void 0===o&&(o=n.EditorID);var u=null;return e.ForEachComp(t,(function(e,t){return function(e){var t,r,i,u,p;switch(o){case n.PID:return null===(r=null===(t=e.P)||void 0===t?void 0:t.ID)||void 0===r?void 0:r.H;case n.Render:return null===(u=null===(i=e.P)||void 0===i?void 0:i.Render)||void 0===u?void 0:u.H;case n.EditorID:default:return null===(p=e._Editor)||void 0===p?void 0:p.eID}}(e)!==r||(u={compJson:e,curPath:t},!1)}),void 0,i),u},e.ParseParameters=function(e,t){if(e){var r="TS"==t||"JS"==t?function(e){return{name:e.split(":")[0],type:e.split(":")[1]}}:function(e){return{name:e}};return e.split(",").map(r)}},e.FindCompPathByEID=function(t,r){var n;return e.ForEachComp(t,(function(e,t){return e._Editor.eID!=r||(n=t,!1)})),n},e}();t.QJsonHelper=i},161:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InspireTreeHelper=void 0;var n=r(14),o=r(12),i=function(){function e(){}return e.prototype.createInspireTreeCommands=function(e,t){var r=this,n=[],o=function(e,t,i,u){for(var p=e.length>t.length?e.length:t.length,a=0;a<p;a++){u++;var c=e[a],l=t[a],s=i.map((function(e){return e}));if(s.push(u),c&&!l)return n.push({path:s,item:c,type:"add"}),void o(e.slice(a+1),[],i,u);if(!c&&l)return n.push({path:s,item:l,type:"delete"}),u--,void o([],t.slice(a+1),i,u);if(!r.isEqual(c,l)){var d=e[a+1],f=t[a+1];return d||f?d&&!f?(n.push({path:s,item:c,type:"add"}),void(r.isEqual(d,l)||o(e.slice(a+1),[],i,u))):!d&&f?(n.push({path:s,item:l,type:"delete"}),u--,void(r.isEqual(c,f)||o([],t.slice(a+1),i,u))):r.isEqual(d,l)?(n.push({path:s,item:c,type:"add"}),void o(e.slice(a+1),t.slice(a),i,u)):(n.push({path:s,item:l,type:"delete"}),u--,void o(e.slice(a),t.slice(a+1),i,u)):(n.push({path:s,item:c,type:"update"}),void o(e.slice(a+1),t.slice(a+1),i,u))}var v=r.getSafeChildNode(c.children),y=r.getSafeChildNode(l.children),m=i.map((function(e){return e}));m.push(u),o(v,y,m,-1)}};return o(t,e.currentTreeData,[],-1),n},e.prototype.isEqual=function(e,t){return!e&&!t||!(!e||!t)&&e.text==t.text},e.prototype.getSafeChildNode=function(e){return e&&!0!==e?e:[]},e.prototype.createInspireTreeEditorDisplayName=function(e,t){if(t){var r={},o={},i={customCompValues:{},editorDisplayNames:{}};return n.QJsonHelper.ForEachComp(t,(function(t,n){var u=e.getComponentPim(t.T),p=e.pimManager.GetComponentList();if("CustomComponent"==t.T){var a=!1;Object.keys(p).forEach((function(e){var r,n=p[e];Object.keys(null===(r=n.Component)||void 0===r?void 0:r.Properties).forEach((function(r){var c,l,s,d;if("QJsonPath"==(null===(c=n.Component)||void 0===c?void 0:c.Properties[r].Name)&&(null===(s=null===(l=n.Component)||void 0===l?void 0:l.Properties[r].DefaultValue)||void 0===s?void 0:s.EditorDefault)==(null===(d=t.P.QJsonPath)||void 0===d?void 0:d.H)&&(null==u?void 0:u.EditorDisplayName)){var f="RenderingComponent"==p[e].Component.Name?u.EditorDisplayName:p[e].Component.Name;o[t._Editor.eID]=f,i.customCompValues=o,a=!0}}))})),!a&&(null==u?void 0:u.EditorDisplayName)&&(o[t._Editor.eID]=u.EditorDisplayName,i.customCompValues=o)}else(null==u?void 0:u.EditorDisplayName)&&(r[t.T]||(r[t.T]=u.EditorDisplayName,i.editorDisplayNames=r));return!0})),i}},e.prototype.createInspireTreeJson=function(e,t){var r=this;if(!e||!t)return[];var o=[],i=function(e){var r,n;return"CustomComponent"==e.T?null===(r=t.customCompValues)||void 0===r?void 0:r[e._Editor.eID]:null===(n=t.editorDisplayNames)||void 0===n?void 0:n[e.T]};return n.QJsonHelper.ForEachComp(e,(function(e,t){var n=function(e,t){var u=i(e),p=r.createInspireItem(e,u);if(Object.keys(e.C).forEach((function(t){e.C[t].c.filter((function(e){return null!=e})).map((function(e){var t;if(p.children=p.children||[],null==e?void 0:e.C)t=n(e,!0);else{var o=i(e);t=r.createInspireItem(e,o)}p.children.push(t)}))})),t)return p;o.push(p)};return n(e,1!=(null==t?void 0:t.length)),!0})),o},e.prototype.createInspireItem=function(e,t){var r,n,i={text:(null!=t?t:e.T)+"("+e.P.ID.H+")",EID:e._Editor.eID,compType:e.T,O:{cType:null===(r=e.O)||void 0===r?void 0:r.cType},nativeCompType:(null===(n=e.CP)||void 0===n?void 0:n.includes("<<named:"))?"namedComponent":void 0};return e.T==o.GhostContants.Name&&(i.itree={state:{"drop-target":!1,draggable:!1,selectable:!1,focused:!1,selected:!1}}),e.O&&0===Object.keys(e.O).length&&(i.itree={state:{"drop-target":!1}}),i},e}();t.InspireTreeHelper=i},6:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeHelper=void 0;var n=function(){function e(){}return e.prototype.isJsonString=function(e){try{JSON.parse(e)}catch(e){return!1}return!0},e.prototype.GetObjectType=function(e){return Object.prototype.toString.call(e)},e.prototype.isArray=function(e){return"[object Array]"==this.GetObjectType(e)},e.prototype.isString=function(e){return"[object String]"===this.GetObjectType(e)},e.prototype.isNumber=function(e){return"[object Number]"===this.GetObjectType(e)},e.prototype.isNull=function(e){return null==e},e.prototype.isFunction=function(e){return"[object Function]"===this.GetObjectType(e)},e.prototype.isObject=function(e){return"[object Object]"===this.GetObjectType(e)},e.prototype.isBool=function(e){return"[object Boolean]"===this.GetObjectType(e)},e.prototype.isBooleanConstructor=function(e){return"function Boolean() { [native code] }"==(null==e?void 0:e.toString())},e.prototype.isStringConstructor=function(e){return"function String() { [native code] }"==(null==e?void 0:e.toString())},e.prototype.isArrayConstructor=function(e){return"function Array() { [native code] }"==(null==e?void 0:e.toString())},e.prototype.isObjectConstructor=function(e){return"function Object() { [native code] }"==(null==e?void 0:e.toString())},e.prototype.isNumberConstructor=function(e){return"function Number() { [native code] }"==(null==e?void 0:e.toString())},e.prototype.isDateString=function(e){return!!this.isString(e)&&!isNaN(Date.parse(e))},e.prototype.isDate=function(e){return"[object Date]"===this.GetObjectType(e)},e.prototype.isFile=function(e){return"[object File]"===this.GetObjectType(e)},e.prototype.isBlob=function(e){return new Blob([e])instanceof Blob},e.prototype.cloneObject=function(e){var t;if(null==e||"object"!=typeof e)return e;if(e instanceof Date)return(t=new Date).setTime(e.getTime()),t;if(Array.isArray(e)){t=[];for(var r=0,n=e.length;r<n;r++)t[r]=this.cloneObject(e[r]);return t}if("object"==typeof e){for(var o in t=e.constructor&&e.constructor.length<1?new e.constructor:{},e)e.hasOwnProperty(o)&&(t[o]=this.cloneObject(e[o]));return t}throw new Error("Unable to copy obj! Its type isn't supported.")},e}();t.TypeHelper=n},779:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InspireTreeWorker=void 0;var n=r(161),o=function(){this.inspireTreeHelper=new n.InspireTreeHelper};t.InspireTreeWorker=o;var i=self,u=new o;i.onmessage=function(e){setTimeout((function(){var t=e.data,r=u.inspireTreeHelper.createInspireTreeJson(t.pjson,t.editorDisplayNames);if(t.recreate)p({treeData:r,recreate:t.recreate});else{var n=u.inspireTreeHelper.createInspireTreeCommands(t,r);p({comamnds:n,treeData:r,recreate:t.recreate})}}),50)};var p=function(e){i.postMessage(e)};t.default=null}})}));